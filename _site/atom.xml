<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>Vitaly Repin</title>
 <link href="http://localhost:4000/vr/atom.xml" rel="self"/>
 <link href="http://localhost:4000/vr/"/>
 <updated>2017-02-12T05:19:33+02:00</updated>
 <id>http://localhost:4000</id>
 <author>
   <name>Vitaly Repin</name>
   <email>vitaly_repin@fsfe.org</email>
 </author>

 
 <entry>
   <title>Course "On the Road to the Free Digital Society" is available in Moodle and IMS Common Cartridge formats now</title>
   <link href="http://localhost:4000/vr/DigitalFree-Moddle/"/>
   <updated>2016-04-14T00:00:00+03:00</updated>
   <id>http://localhost:4000/DigitalFree-Moddle</id>
   <content type="html">&lt;p&gt;If you are interested in launching your own instance of the Stallman&amp;#39;s course &lt;a href=&quot;http://digitalfree.info/FreeDigitalSociety/&quot;&gt;&amp;quot;On the Road to the Free Digital Society&amp;quot;&lt;/a&gt;, I have good news for you.
I have published the course in Moodle Backup and IMS Common Cartridge formats.&lt;/p&gt;

&lt;p&gt;The files are available in the &lt;a href=&quot;http://digitalfree.info/FreeDigitalSociety/downloads/index.html&quot;&gt;&amp;quot;Download&amp;quot; section&lt;/a&gt; of the course website.&lt;/p&gt;

&lt;p&gt;I will be happy to hear your feedback about the course!&lt;/p&gt;

&lt;p&gt;Don&amp;#39;t forget that we need your help in several areas:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/vitalyrepin/FreedomRMS/tree/master/subtitles&quot;&gt;Translations and subtitles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Spreading the world about the course&lt;/li&gt;
&lt;li&gt;Launching the course in the LMS platforms you have access to&lt;/li&gt;
&lt;/ul&gt;

&lt;!--break--&gt;

&lt;p&gt;Check &lt;a href=&quot;http://digitalfree.info/FreeDigitalSociety/support/index.html&quot;&gt;&amp;quot;Support&amp;quot; section&lt;/a&gt; of the course website for the details.&lt;/p&gt;

&lt;p&gt;If you liked this post, you can
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/DigitalFree-Moddle/&amp;text=Course &quot;On the Road to the Free Digital Society&quot; is available in Moodle and IMS Common Cartridge formats now&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  share it with your followers&lt;/a&gt; 
or 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  follow me on Twitter&lt;/a&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Визит президента Финляндии Кекконена в Эстонию в 1964 году</title>
   <link href="http://localhost:4000/vr/Kekkonen-Estonia-1964/"/>
   <updated>2016-04-04T00:00:00+03:00</updated>
   <id>http://localhost:4000/Kekkonen-Estonia-1964</id>
   <content type="html">&lt;p&gt;В одной из ведущих финских газет &lt;a href=&quot;https://www.hbl.fi/&quot;&gt;Hufvudstadsbladet&lt;/a&gt; недавно вышла &lt;a href=&quot;http://www.pressreader.com/finland/hufvudstadsbladet/20160227/281844347712616&quot;&gt;статья&lt;/a&gt;, рассказывающая о посещении
&lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%9A%D0%B5%D0%BA%D0%BA%D0%BE%D0%BD%D0%B5%D0%BD,_%D0%A3%D1%80%D1%85%D0%BE&quot;&gt;президентом Финляндии Кекконеном&lt;/a&gt;
советской Эстонии в 1964 году. Её название  — «Charmade esterna och retade gallfeber på KGB»  — можно перевести как «Очарованные эстонцы и взбешённый КГБ».
Статья основана на воспоминаниях &lt;a href=&quot;https://fi.wikipedia.org/wiki/Jaakko_Kalela&quot;&gt;Якко Калела&lt;/a&gt;  — финского дипломата, 33 года работавшего советником Кекконена.&lt;/p&gt;

&lt;p&gt;Публикация показалась мне настолько интересной, что я решил пересказать её для русскоязычной публики.&lt;/p&gt;

&lt;h1&gt;Предистория — прорыв бойкота Венгрии&lt;/h1&gt;

&lt;p&gt;&lt;a title=&quot;See page for author [Public domain], via Wikimedia Commons&quot; href=&quot;https://commons.wikimedia.org/wiki/File%3AKekkonen3a.jpg&quot;&gt;&lt;img width=&quot;50%&quot; align=&quot;left&quot; alt=&quot;Kekkonen3a&quot; style=&quot;margin: 0px 15px&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Kekkonen3a.jpg/256px-Kekkonen3a.jpg&quot;/&gt;&lt;/a&gt;
Президент Кекконен с ранних лет проявлял интерес к культуре финно-угров  — уже в 1928 году он участвовал во всемирном финно-угорском культурном форуме в Будапеште. В те же годы молодой Урхо выучил эстонский, у него было много
эстонских друзей-спортсменов (в юности Кекконен серьёзно увлекался спортом и даже стал чемпионом Финляндии по прыжкам в высоту).&lt;/p&gt;

&lt;p&gt;Визит 1964 года не был экспромтом. Ему предшествовал похожий визит в Будапешт. После подавления
&lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%92%D0%B5%D0%BD%D0%B3%D0%B5%D1%80%D1%81%D0%BA%D0%BE%D0%B5_%D0%B2%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%B8%D0%B5_1956_%D0%B3%D0%BE%D0%B4%D0%B0&quot;&gt;венгерского восстания 1956 года&lt;/a&gt;,
Венгрия жила в изоляции. Во время государственного визита в Югославию Кекконену предоставился шанс прорвать эту блокаду  — в компании супруги, адъютанта и телохранителя он поехал на поезде в Будапешт, в то время как
остальные члены делегации вернулись в Хельсинки. Поездка была неофициальной и носила ознакомительный характер. Несмотря на это, визит прорвал бойкот Венгрии и она вновь стала популярным туристическим направлением.&lt;/p&gt;

&lt;p&gt;Калела изучал дневники адъютанта Кекконена, относящиеся к обоим визитам, и считает очевидным, что посещение Эстонии готовилось по тем же лекалам.&lt;/p&gt;

&lt;p&gt;Собирались и данные о ситуации в Эстонии - так, ближайший советник Кекконена, его «серый кардинал» &lt;a href=&quot;https://en.wikipedia.org/wiki/Kustaa_Vilkuna&quot;&gt;Кустаа Вилкуна&lt;/a&gt;, посетил республику в конце 50-х годов и подробно
рассказал обо всём увиденном и услышанном финскому президенту.&lt;/p&gt;

&lt;!--break--&gt;

&lt;h1&gt;Сложности организации поездки в Эстонию&lt;/h1&gt;

&lt;p&gt;&lt;a title=&quot;By Kalle Kultala. (HeSa) [Public domain], via Wikimedia Commons&quot; href=&quot;https://commons.wikimedia.org/wiki/File%3AVoroshilov%2C_Khrushchev%2C_Kekkonen.jpeg&quot;&gt;&lt;img width=&quot;50%&quot; align=&quot;left&quot; style=&quot;margin: 0px 15px&quot; alt=&quot;Voroshilov, Khrushchev, Kekkonen&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/b/bc/Voroshilov%2C_Khrushchev%2C_Kekkonen.jpeg&quot;/&gt;&lt;/a&gt;
Для Кекконена было очень важным избежать приезда в Таллин через Москву или Ленинград, так как это являлось бы косвенным признанием советской аннексии Эстонии.&lt;/p&gt;

&lt;p&gt;Поэтому после государственного визита в Варшаву он хотел поехать на поезде в Таллин вместе со своей женой и адъютантом. Однако железнодорожное сообщение не работало. В конце концов, договорились о том, что
самолёт с официальной делегацией сделает промежуточную посадку в Таллине по дороге из Варшавы в Хельсинки. И пока самолет дозаправляется, Кекконен сможет осмотреть Таллин, в то время как остальная делегация полетит дальше в Хельсинки.&lt;/p&gt;

&lt;p&gt;Это решение было компромиссом с советской стороной, которая хотела, чтобы визит носил более официальный характер, что позволило бы использовать его в собственных целях. Однако Кекконен смог противостоять давлению советов благодаря
своим хорошим отношениям с Хрущёвым.&lt;/p&gt;

&lt;h1&gt;Речи в Таллине и Тарту - «ваш президент говорит на лучшем эстонском, чем наш»&lt;/h1&gt;

&lt;p&gt;&lt;a title=&quot;See page for author [Public domain], via Wikimedia Commons&quot; href=&quot;https://commons.wikimedia.org/wiki/File%3AKekkonen_eestiss%C3%A4.jpg&quot;&gt;&lt;img width=&quot;50%&quot; align=&quot;left&quot; style=&quot;margin: 0px 15px&quot; alt=&quot;Kekkonen eestissä&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/4/41/Kekkonen_eestiss%C3%A4.jpg&quot;/&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Уже в аэропорту Кекконен произнёс речь для телевидения по-эстонски. Писатель &lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%A2%D1%83%D0%B3%D0%BB%D0%B0%D1%81,_%D0%A4%D1%80%D0%B8%D0%B4%D0%B5%D0%B1%D0%B5%D1%80%D1%82&quot;&gt;Фридеберт Туглас&lt;/a&gt; после
приёма сказал: «Ваш президент говорит по-эстонски лучше, чем чем наш» (председатель совета министров ЭССР &lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%9C%D1%8E%D1%80%D0%B8%D1%81%D0%B5%D0%BF%D0%BF,_%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9_%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B0%D0%BD%D0%B4%D1%80%D0%BE%D0%B2%D0%B8%D1%87&quot;&gt;Алексей Мюрисепп&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Из Таллина президент Финляндии поехал в университетский городок Тарту, где снова произнес речь на эстонском. Интересно, что &lt;a href=&quot;https://ru.wikipedia.org/wiki/Rahva_H%C3%A4%C3%A4l&quot;&gt;газета Rahva Hääl&lt;/a&gt; (эстонский аналог «Правды»)
опубликовала лишь отрывки из речи Кекконена, что противоречило обычной практике и свидетельствовало о встревоженной реакции партийного руководства Эстонии.&lt;/p&gt;

&lt;h1&gt;Результаты визита&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;/vr/public/images/Vanemuine.jpg&quot; width=&quot;50%&quot; alt=&quot;M/S Vanemuine&quot; align=&quot;left&quot; style=&quot;margin: 0px 15px&quot;&gt;&lt;/p&gt;

&lt;p&gt;Среди детей, бежавших за кортежем финского президента в Тарту, был и один из будущих премьеров независимой Эстонии, &lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%90%D0%BD%D1%81%D0%B8%D0%BF,_%D0%90%D0%BD%D0%B4%D1%80%D1%83%D1%81&quot;&gt;Андрус Ансип&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Он рассказывал об ощущениях эстонцев от приезда финского президента: «Мы не полностью забыты, если к нам приезжает лидер независимой западной страны и говорит о нашей культуре по-эстонски».&lt;/p&gt;

&lt;p&gt;Кекконен считал, что эстонская культура не сможет выжить в изгнании и необходимо оказывать ей поддержку на эстонской земле, о чём прямо сказал группе эстонофилов, приглашенных им в президентскую резиденцию
&lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%A2%D0%B0%D0%BC%D0%BC%D0%B8%D0%BD%D0%B8%D0%B5%D0%BC%D0%B8&quot;&gt;Тамминиеми&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Вскоре после посещения Кекконеном
Эстонии, было возобновлено (впервые после советской аннексии Эстонии) пассажирское паромное сообщение между Финляндией и Эстонией, открывшее возможности для туризма и культурного обмена между двумя республиками.
В Эстонии стало возможным смотреть финское телевидение.&lt;/p&gt;

&lt;p&gt;Всё это внесло весомый вклад в то, что спустя 27 лет Эстония оказалась хорошо подготовлена к восстановлению независимости.
&lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D1%80%D0%B8,_%D0%9B%D0%B5%D0%BD%D0%BD%D0%B0%D1%80%D1%82&quot;&gt;Леннарт Мери&lt;/a&gt;, первый президент
Эстонии после восстановления суверенитета, часто говорил, что визит Кекконена был важной вехой в истории страны.&lt;/p&gt;

&lt;p&gt;Источник: Stefan Lundberg, &lt;a href=&quot;http://www.pressreader.com/finland/hufvudstadsbladet/20160227/281844347712616&quot;&gt;Charmade esterna och retade gallfeber på KGB&lt;/a&gt;. HBL, 27.02.2016.&lt;/p&gt;

&lt;h1&gt;Postscriptum&lt;/h1&gt;

&lt;p&gt;Интересная статья по теме:
&lt;a href=&quot;http://tallinn.cold-time.com/?p=5195&quot;&gt;«Лично познакомиться с вашими успехами»: президент Финляндии в Советской Эстонии&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Если у вас есть другие интересные воспоминания об этом визите и его последствиях, поделитесь ими, пожалуйста, в комментариях!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to incorporate external utility scripts into Logstash Pipeline</title>
   <link href="http://localhost:4000/vr/Logstash-filter-external-script/"/>
   <updated>2016-02-06T00:00:00+02:00</updated>
   <id>http://localhost:4000/Logstash-filter-external-script</id>
   <content type="html">&lt;h3&gt;Overview&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.elastic.co/products/logstash&quot;&gt;Logstash&lt;/a&gt; is a great tool to process the logs and extract valuable data from them. There are many useful Logstash
&lt;a href=&quot;https://www.elastic.co/guide/en/logstash/current/filter-plugins.html&quot;&gt;filter plugins&lt;/a&gt; which make it easy to process the raw log data. However, sometimes
external utilities are required to process the data in a more complicated way than existing filter plugins can.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s possible to &lt;a href=&quot;https://www.elastic.co/guide/en/logstash/current/_how_to_write_a_logstash_filter_plugin.html&quot;&gt;code your own filter plugin&lt;/a&gt; in Ruby
but what to do if you already have the filter implemented in some other programming language and want to reuse it in Logstash?&lt;/p&gt;

&lt;p&gt;In this case it&amp;#39;s easier to communicate with this external filter from Logstash. This article demonstrates the simplest way of incorporating external
applications into the Logstash pipeline:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Logstash launches external program and delivers the input data to it through command line arguments and stdin&lt;/li&gt;
&lt;li&gt;External program writes results to stdout in any format understood by Logstash filters (e.g., JSON)&lt;/li&gt;
&lt;li&gt;Logstash parses output of the external program and continues to handle it in the pipeline&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;It&amp;#39;s needless to say that it is not the very best approach in terms of performance.
E.g., if startup time of the external application is significant, you may consider
to launch this application once (as a daemon/service) and communicate with it using &lt;a href=&quot;http://en.wikipedia.org/wiki/%C3%98MQ&quot;&gt;ØMQ&lt;/a&gt; or other high-performance message queue.&lt;/p&gt;

&lt;p&gt;Detailed explanation and usage example are stated below.&lt;/p&gt;

&lt;!--break--&gt;

&lt;h2&gt;Launching external program&lt;/h2&gt;

&lt;p&gt;We will use &lt;a href=&quot;https://www.elastic.co/guide/en/logstash/current/plugins-filters-ruby.html&quot;&gt;ruby filter&lt;/a&gt; in order to launch external application and capture its output:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# &amp;lt;...&amp;gt; &amp;lt;- More filters are above&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# Launching external script to make a deeper text analysis&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/.+/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;ruby&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;require &amp;quot;open3&amp;quot;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                   body_path = event[&amp;quot;file_path&amp;quot;]&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                   cmd =  &amp;quot;/opt/bin/my_filter.py -f #{file_path}&amp;quot;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                   stdin, stdout, stderr = Open3.popen3(cmd)&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                   event[&amp;quot;process_result&amp;quot;] = stdout.read&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                   err = stderr.read&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                   if err.to_s.empty?&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                     filter_matched(event)&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                   else&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                     event[&amp;quot;ext_script_err_msg&amp;quot;] = err&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;                   end&amp;#39;&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;remove_field&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;file_path&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# Parsing of the process_result is here (see the next section)&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Note:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;External application &lt;code&gt;/opt/bin/my_filter.py&lt;/code&gt; is launched only if &lt;code&gt;file_path&lt;/code&gt; field is not empty.  This field shall be extracted earlier in the filter pipeline. It&amp;#39;s value (&lt;code&gt;#{file_path}&lt;/code&gt;) is used in
the command line to launch external filter.&lt;/li&gt;
&lt;li&gt;stdin handle is accessible for our tiny ruby script and it can be used to send more data to the external program (&lt;code&gt;/opt/bin/my_filter.py&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;If application stderr is not empty, filter is not considered to be successful and stderr content is recorded into &lt;code&gt;ext_script_err_msg&lt;/code&gt; field.&lt;/li&gt;
&lt;li&gt;If processing was successful,  output of the external program is recorded into &lt;code&gt;process_result&lt;/code&gt; filed and &lt;code&gt;file_path&lt;/code&gt; field is removed&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Parsing output of the external program (JSON)&lt;/h3&gt;

&lt;p&gt;The easiest way to deliver the data back to Logstash is to use one of the structured data formats understood by Logstash filters: &lt;a href=&quot;https://www.elastic.co/guide/en/logstash/current/plugins-filters-json.html&quot;&gt;JSON&lt;/a&gt;,
&lt;a href=&quot;https://www.elastic.co/guide/en/logstash/current/plugins-filters-xml.html&quot;&gt;XML&lt;/a&gt; or more old-fashioned &lt;a href=&quot;https://www.elastic.co/guide/en/logstash/current/plugins-filters-kv.html&quot;&gt;key-value (kv)&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Example with JSON:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span&gt;&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;process_result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/.+/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;process_result&amp;quot;&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;remove_field&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;process_result&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Note:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Field &lt;code&gt;process_result&lt;/code&gt; holds the output of the external application and is supposed to be in JSON format.&lt;/li&gt;
&lt;li&gt;If parsing was successful JSON fields are becoming event fields and intermediate field &lt;code&gt;process_result&lt;/code&gt; is removed.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Several words about exec output plugin&lt;/h3&gt;

&lt;p&gt;If you only need to launch external utility upon any matched Logstash event, you may consider to use simpler approach
– &lt;a href=&quot;https://www.elastic.co/guide/en/logstash/current/plugins-outputs-exec.html&quot;&gt;exec output plugin&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If you liked this post, you can
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/Logstash-filter-external-script/&amp;text=How to incorporate external utility scripts into Logstash Pipeline&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  share it with your followers&lt;/a&gt; 
or 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  follow me on Twitter&lt;/a&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Copyrighted monuments in Finland. Why Finnish works of art are not widely represented in Wikipedia</title>
   <link href="http://localhost:4000/vr/CopyrightedMonumentsFinland/"/>
   <updated>2015-09-18T00:00:00+03:00</updated>
   <id>http://localhost:4000/CopyrightedMonumentsFinland</id>
   <content type="html">&lt;h1&gt;What are you talking about?&lt;/h1&gt;

&lt;p&gt;&lt;img alt=&quot;Monument to Tapio Rautavaara in Åggelby (Oulunkylä)&quot; src=&quot;/vr/public/images/Tapio_Rautavaara.jpg&quot; width=&quot;50%&quot; align=&quot;left&quot; style=&quot;margin: 0px 15px&quot;&gt;
It can be a huge surprise for most of Finns but a lot of statues and monuments installed in public places in Finland are copyrighted.
Unfortunately this is not only a curious fact. It has serious affect on the rights to publish photos of these works of art.&lt;/p&gt;

&lt;p&gt;I have recently faced this problem when I shot a photo of the beautiful &lt;a href=&quot;https://fi.wikipedia.org/wiki/Tapio_Rautavaara#/media/File:Monument_to_Tapio_Rautavaara_in_%C3%85ggelby_%28Oulunkyl%C3%A4%29_1.jpg&quot;&gt;Tapio Rautavaara&amp;#39;s statue&lt;/a&gt; installed in Åggelby in the capital area and uploaded it
to &lt;a href=&quot;https://commons.wikimedia.org/wiki/Main_Page&quot;&gt;Wikimedia Commons&lt;/a&gt; (this repository hosts most of the images used in Wikipedia articles).
My contribution was almost immediately marked for deletion. In fact,
Wikimedia has a lot of &lt;a href=&quot;https://commons.wikimedia.org/wiki/Category:FOP-related_deletion_requests&quot;&gt;deletion requests based on the same reason&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This was a surprise and pushed me to investigate the situation deeper. At the end, I managed to find a way to publish my photo in Finnish Wikipedia (but not in Wikimedia).&lt;/p&gt;

&lt;p&gt;I hope my findings can be useful for others facing similar issues in Finland and other countries which lack &amp;quot;freedom of panorama&amp;quot;. Besides all, it is a good illustration that even Europe
is still on the way to a &lt;a href=&quot;http://digitalfree.info/FreeDigitalSociety/index.html&quot;&gt;free digital society&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This article is written in English because it&amp;#39;s content (as I believe) can be beneficial for the foreigners who visited Finland and want to contribute their photos to Wikipedia.&lt;/p&gt;

&lt;!--break--&gt;

&lt;h1&gt;Copyrighted monuments. What is this?&lt;/h1&gt;

&lt;p&gt;Copyright length for statues in Finland is 70 years from the authors death. It means the statue is free from copyright in Finland if the author is died before 1945.
Statue is free from copyright in both US and Finland if the author is died before 1926 OR if the author is died before 1945 and if the statue is published before 1923.&lt;/p&gt;

&lt;p&gt;So, if the monument is free from copyright in both US and Finland you can make its photo and upload it to Wikimedia without any difficulties.&lt;/p&gt;

&lt;p&gt;But what to do if it is not free from copyright? Is it possible to upload them to Wikimedia? No, not at all. Is it possible to upload them to Wikipedia? The answer is — it depends.
Sometimes yes, sometimes no and always depends on the rules for specific Wikipedia project (I will clarify what does &amp;quot;Wikipedia project&amp;quot; mean further).&lt;/p&gt;

&lt;h1&gt;No Freedom of Panorama for artistic works in Finland&lt;/h1&gt;

&lt;p&gt;First we need to understand the root of the problem which sits in the Finnish legislation system.&lt;/p&gt;

&lt;p&gt;Quoting &lt;a href=&quot;https://en.wikipedia.org/wiki/Freedom_of_panorama&quot;&gt;Wikipedia article on the matter&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Freedom of Panorama is a provision in the copyright laws of various jurisdictions that permits taking photographs and video footage
and creating other images (such as paintings) of buildings and sometimes sculptures and other art works which are permanently located in a public place, without infringing on any
copyright that may otherwise subsist in such works, and to publishing such images. It is an exception to the normal rule that the copyright owner has the exclusive right to
authorize the creation and distribution of derivative works.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The image below shows the status of this Freedom in different countries:&lt;/p&gt;

&lt;p&gt;&lt;a title=&quot;By Mardus [CC BY-SA 3.0 (http://creativecommons.org/licenses/by-sa/3.0)], via Wikimedia Commons&quot; href=&quot;https://commons.wikimedia.org/wiki/File%3AFreedom_of_Panorama_world_map.png&quot;&gt;&lt;img width=&quot;100%&quot; alt=&quot;Freedom of Panorama world map&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/Freedom_of_Panorama_world_map.png/512px-Freedom_of_Panorama_world_map.png&quot;/&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Finland is shown in yellow color which means that freedom is given to the buildings only. More details can be found in the
corresponding &lt;a href=&quot;https://commons.wikimedia.org/wiki/Commons:Freedom_of_panorama#Finland&quot;&gt;Wikimedia article&lt;/a&gt;.&lt;/p&gt;

&lt;h1&gt;What can I publish in Wikimedia?&lt;/h1&gt;

&lt;p&gt;WARNING to the web surfer: This section is applicable only to Finland!&lt;/p&gt;

&lt;h2&gt;Statues&lt;/h2&gt;

&lt;p&gt;If the statue is free from copyright (see the conditions in the first section), it&amp;#39;s completely OK to publish its image in Wikimedia.
If it is not copyright-free, you simply are not allowed to do it. The reason is that the images published in Wikimedia can be used for  commercial purposes. And Finnish law does not grant
this right for the copyrighted works of art.&lt;/p&gt;

&lt;h2&gt;Buildings&lt;/h2&gt;

&lt;p&gt;It&amp;#39;s completely OK to publish images of buildings in Wikimedia.&lt;/p&gt;

&lt;h1&gt;What and how can I publish in Wikipedia?&lt;/h1&gt;

&lt;h2&gt;What?&lt;/h2&gt;

&lt;p&gt;First, we need to understand that there are several Wikipedias. E.g., Finnish Wikipedia, Swedish Wikipedia and English Wikipedia are different projects which might have different policy towards
publishing non-free works. This is why it is always easier to publish in Wikimedia which is the common multimedia repository used by all the Wikipedia projects.&lt;/p&gt;

&lt;p&gt;Status of non-free content for different wikis is summarized &lt;a href=&quot;https://meta.wikimedia.org/wiki/Non-free_content&quot;&gt;here&lt;/a&gt;. For Finland it is:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Non-free images or music samples are allowed if 1) they are not replaceable by free content considering the purpose which they are serving in the article and
2) they are used in accordance with the quotation right of the Finnish copyright law. Historically significant non-free images are forbidden, as they could be replaced.
Also non-free images of living people are forbidden.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In in doubt, you can always ask your question in the &lt;a href=&quot;https://fi.wikipedia.org/wiki/Keskustelu_Wikipediasta:L%C3%A4hetyst%C3%B6&quot;&gt;Finnish Wikipedia discussion page&lt;/a&gt;. Finnish Wikipedia community
is very friendly.&lt;/p&gt;

&lt;h2&gt;How?&lt;/h2&gt;

&lt;p&gt;To upload your image to Finnish Wikipedia you need to use &lt;a href=&quot;https://fi.wikipedia.org/wiki/Toiminnot:Tallenna&quot;&gt;toiminnot:Tallenna&lt;/a&gt; template and fill the following information:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;{{Tiedoston tiedot
| Kuvaus = Title of the work. It&amp;#39;s a good practice to include here also the name of the author (sculptor) and creation year.
| Lähde = Own work
| Päiväys = Date when the photo was taken
| Tekijä = You
}}

{{Taideteos|name of the article where picture is used|{{oma|cc-by-3.0}} }}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can check &lt;a href=&quot;https://fi.wikipedia.org/wiki/Tiedosto:Monument_to_Tapio_Rautavaara_in_%C3%85ggelby_%28Oulunkyl%C3%A4%29_1.jpg&quot;&gt;Tapio Rautavaara&amp;#39;s monument page&lt;/a&gt; as an example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;== Yhteenveto ==
{{Tiedoston tiedot
| Kuvaus = Monument of Tapio Rautavaara / &amp;#39;&amp;#39;Kulkurin uni&amp;#39;&amp;#39; in Oulunkylä (Åggelby). Monument is made by [[Veikko Myller]] (2000).
| Lähde = Own work
| Päiväys = 2 September 2015
| Tekijä = [[user:Vitaly repin]] (photograph)
| Tekijänoikeuksien haltija =
}}

== Käyttöoikeus ==
{{Taideteos|Tapio_Rautavaara|{{oma|cc-by-3.0}} }}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In order to use this image from a (Finnish) Wikipedia article you need to insert this code into the article:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;[[Tiedosto:File_name|thumb|Caption]]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;[[Tiedosto:Monument to Tapio Rautavaara in Åggelby (Oulunkylä)_1.jpg|thumb|Veikko Myller, &amp;#39;&amp;#39;Tapio Rautavaaran muistomerkki / Kulkurin uni&amp;#39;&amp;#39;, 2000, Oulunkylän torilla.]]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It&amp;#39;s important to understand that you can&amp;#39;t use the image from Finnish Wikipedia in other Wikipedias (e.g., English). You will need to upload an image there as well.&lt;/p&gt;

&lt;h1&gt;Can&amp;#39;t we change the legislation?&lt;/h1&gt;

&lt;p&gt;As you see, it is not always impossible to share the Finnish work of art you liked through Wikipedia. But it is not that simple and requires certain level of motivation.&lt;/p&gt;

&lt;p&gt;I am interested to know which benefits current legislation brings to the Finnish economy and recognition of the Finnish culture around the globe. As of now, I see only drawbacks
of the current system:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Less visibility of the Finnish works of art in Wikipedia&lt;/li&gt;
&lt;li&gt;Complexities with promotion of Finnish cultural heritage through  campaigns like &lt;a href=&quot;http://www.wikilovesmonuments.org/&quot;&gt;&amp;quot;Wiki Loves Monuments&amp;quot;&lt;/a&gt;
or &lt;a href=&quot;https://commons.wikimedia.org/wiki/Commons:Wiki_Loves_Public_Art_2013&quot;&gt;&amp;quot;Wiki Loves Public Art&amp;quot;&lt;/a&gt;. The scope of such campaigns in Finland shall be limited to non-copyrighted monuments and buildings&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I personally much more like the legislation in our neighboring country of Sweden where sculptures and 3D art are covered by Freedom of Panorama.
May be it&amp;#39;s something for &lt;a href=&quot;https://en.wikipedia.org/wiki/Pirate_Party_of_Finland&quot;&gt;Finnish Pirate Party&lt;/a&gt; and
&lt;a href=&quot;https://en.wikipedia.org/wiki/Swedish_People&amp;#x27;s_Party_of_Finland&quot;&gt;SFP/RKP&lt;/a&gt; to look into? It&amp;#39;s not always a bad idea to copy Swedish
ways of doing things to Finland (&lt;a href=&quot;http://www.engadget.com/2007/08/29/nokias-iphone-no-seriously/&quot;&gt;with pride&lt;/a&gt;, of course!) :-)&lt;/p&gt;

&lt;p&gt;P.S. It&amp;#39;s pity I didn&amp;#39;t know about this problem while preparing &lt;a href=&quot;http://digitalfree.info/&quot;&gt;Stallman&amp;#39;s course about the free digital society&lt;/a&gt;. This is a really good example of copyright in action
in the modern world.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tour de Helsinki 2015. Nybörjares intryck från cykelloppet</title>
   <link href="http://localhost:4000/vr/Tour-de-Helsinki-2015/"/>
   <updated>2015-09-04T00:00:00+03:00</updated>
   <id>http://localhost:4000/Tour-de-Helsinki-2015</id>
   <content type="html">&lt;h1&gt;Tour de Helsinki — mitt första cykellopp&lt;/h1&gt;

&lt;style type=&quot;text/css&quot;&gt;
     #mapab51dab3ebb1c69b7d2334773a4052f1 {
     width:100%;
     height:550px;
     background-color: white;
   }
  &lt;/style&gt;

&lt;div id=&quot;mapab51dab3ebb1c69b7d2334773a4052f1&quot;&gt;

&lt;/div&gt;

&lt;script&gt;
  var map = L.map('mapab51dab3ebb1c69b7d2334773a4052f1', {
    fullscreenControl: true
  }).setView([60.162818, 21.56339], 14);

  var track = new L.GPX(&quot;/vr/public/gpx/TourDeHelsinki2015.gpx&quot;,
            { async: true,
              marker_options: {
                    startIconUrl: false,
                    endIconUrl: false,
                    shadowUrl: false
                },
              polyline_options: {
                color: '#4B0082',
                weight: 4,
                opacity: 1
                }
             });

  var tileUrl = 'http://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png',
  layer = new L.TileLayer(tileUrl, {maxZoom: 18, attribution: 'Tiles courtesy of &lt;a href=&quot;http://www.thunderforest.com/opencyclemap/&quot; target=&quot;_blank&quot;&gt;OpenCycleMap&lt;/a&gt; &amp;mdash; Map data &amp;copy; &lt;a href=&quot;http://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt;'});
map.addLayer(layer);

 var locArr = [
                     [60.387993, 24.6453871],
                     [60.514133, 24.921212],
                     [60.4704712,25.216704],
                     [60.3365452,25.1438347],
                     [60.2013977, 24.9453899]
                 ];

 var descArr = [
                      &quot;&lt;a href='http://www.tourdehelsinki.fi/en/route' target='_blank'&gt;Servicepunkten 1: Lepsämäntie&lt;/a&gt;&quot;,
                      &quot;&lt;a href='http://www.tourdehelsinki.fi/en/route' target='_blank'&gt;Servicepunkten 2: Raalantie&lt;/a&gt;&quot;,
                      &quot;&lt;a href='http://www.tourdehelsinki.fi/en/route' target='_blank'&gt;Servicepunkten 3: Paippistentie&lt;/a&gt;&quot;,
                      &quot;&lt;a href='http://www.tourdehelsinki.fi/en/route' target='_blank'&gt;Servicepunkten 4: Vanha Porvoontie&lt;/a&gt;&quot;,
                      &quot;&lt;a href='https://en.wikipedia.org/wiki/Helsinki_Velodrome' target='_blank'&gt;Start och finish: Velodromen&lt;/a&gt;&quot;
               ];


 map.fitBounds(locArr);

 for (var i = 0; i &lt; descArr.length; i++) {
      L.marker(locArr[i]).addTo(map).bindPopup(descArr[i]).openPopup();
 };

 track.addTo(map);
&lt;/script&gt;

&lt;p&gt;Tour de Helsinki är ett stort cykellopp som sker i Helsingfors regionen vid slutet av sommaren. Resrutten är 140 km lång och löper runt huvudstadsregioner
(Helsingfors, Vanda, Esbo, Grankulla, Sibbo, Nurmijärvi, Tusby, Hyvinge och Mäntsälä).  Det första loppet gick av stapeln 2005. Nu har det över två tusen deltagare
både tävlings- och fritidscyklister.&lt;/p&gt;

&lt;p&gt;Jag har aldrig deltagit i ett cykellopp men nu cyklar jag tävlingscykel  eftersom jag blev intresserad av det här arrangemanget och  bestämde att deltaga i Tour de Helsinki 2015.
Mitt viktigaste mål var inte att vinna (jag är inte alls en tävlingscyklist) utan erfarenhet vad ett stort cykellopp  är.&lt;/p&gt;

&lt;p&gt;Det första steget var lätt — att anmäla sig i &lt;a href=&quot;http://www.tourdehelsinki.fi/en/enrolment&quot;&gt;tävlings webbtjänst&lt;/a&gt; (tyvärr finns det inga svenska webbsidor, bara finska och engelska
användargränssnitt  existerar).  Förresten var det en bra idé att anmäla sig tidigare — det är nämligen billigare (49 € om man anmäler före den 31 maj mot 75 € om man anmäler efter den 29 augusti).&lt;/p&gt;

&lt;!--break--&gt;

&lt;h1&gt;Arrangemanget&lt;/h1&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot;  href=&quot;https://www.flickr.com/photos/vitalyrepin/20493168624/in/dateposted-public/&quot; title=&quot;Tour de Helsinki 2015&quot;&gt;&lt;img src=&quot;https://farm6.staticflickr.com/5639/20493168624_20391ae5bd_z.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Tour de Helsinki 2015&quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Söndagen den 30 augusti 2015 var tävlingsdagen. På lördagen kom jag till Helsingfors velodrom och fick deltagarpaketet — en nummerlapp, ett datachips (används för att ta start-
och sluttid) och en informationsbroschyr.&lt;/p&gt;

&lt;p&gt;På söndagen fanns där en stor skara cyklister.
Varje grupp hade en flagga med gruppens fart — från 20 till 45. Jag och min kompis ställde oss i grupp 30 (vi är optimister!).&lt;/p&gt;

&lt;p&gt;Kl. 11 startade vi. De första 10 km for över Helsingfors gator (stängda för övrig trafik) i maklig takt. Själva loppet började vid Alberga i Esbo.&lt;/p&gt;

&lt;p&gt;Jag förstod snabbt jag inte kan cykla med gruppen 30 (km/h) och sökte mig till gruppen 28. Det fanns 4 servicepunkter (&amp;quot;huoltopiste&amp;quot; på finska) där man fick en paus, dricka vatten eller saft
och äta russin,  bananer,  bröd samt  ättiksgurkor. De övriga befann sig på olika avstånd från starten — 39.7 km, 63.8 km, 95.9 km samt 117.8 km. Min grupp stannade inte i den första servicepunkten
och jag tog mat och dryck i den andra punkten (63.8 km) för första gången.&lt;/p&gt;

&lt;p&gt;Då vi cyklade förbi den första servicepunkten såg vi ett &lt;a href=&quot;http://svenska.yle.fi/artikel/2015/08/31/borgacyklist-skadades-allvarligt-i-tour-de-helsinki&quot;&gt;allvarligt olycksfall&lt;/a&gt;. Polisen och läkare
var där och gav första hjälpen.&lt;/p&gt;

&lt;p&gt;För det mesta var vädret soligt med undantag för både en kort åskskur och regn. Då det regnade fick min cykel punktering och jag måste byta en innerslang. Resultatet blev jag lämnade  gruppen 28
och fortsatte separat.&lt;/p&gt;

&lt;p&gt;Övervägande cyklade jag ensam men när var jag ungefär 1.5 kilometer från målet hörde jag ljud från grupp 22. Jag snabbade takten och lämnade dem bakom ryggen.
Jag avslutade tävlingen ungefär 1 minuten före gruppen 22.&lt;/p&gt;

&lt;p&gt;Cykelloppet avslutades med varm måltid  på velodromen —  bruna bönor och ris &amp;amp; kött.  Det fanns också hydreringsdryck  som jag drack mycket av. På kvällen visste jag redan min resultat
på &lt;a href=&quot;http://www.tourdehelsinki.fi/en/results&quot;&gt;Tour de Helsinki webbtjänsten&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Jag gillade väldigt arrangemangsorganisationen. I alla korsningar stod en person som visade riktningen, vägmärken informerade om servicepunkter och avtag. När vi kom tillbaka till Helsingfors
var gatorna stängda för biltrafik och trafikljusen blinkade gult. Cyklister kunde cykla utan några avbrott.  Det är viktigt särskilt i det sista resruttsstycket eftersom cyklister var redan trötta.
Jag kände mig trygg för akutbilar var färdiga att förse med första hjälpen längs hela resrutten.&lt;/p&gt;

&lt;h1&gt;Mina intryck och feedback&lt;/h1&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot;  href=&quot;https://www.flickr.com/photos/vitalyrepin/20929013899/in/album-72157655816012213/&quot; title=&quot;Tour de Helsinki 2015&quot;&gt;&lt;img src=&quot;https://farm1.staticflickr.com/776/20929013899_c1fe9205c1_z.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Tour de Helsinki 2015&quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Jag tyckte om evenemanget. Det var intressant att delta i det stora cykelloppet omkring Heslingfors. Jag gillade särskilt hälsningar från åskådare längs med resrutten.
Men jag tror att några saker kan förbättras:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;För det mesta var evenemangens information på finska (t.ex. informationsbrochyren). Jag drömmer inte om information på svenska (Men varför inte? Vi är i Finland! :-)  ) men kanske vore det är möjligt att ha mera engelskt material?&lt;/li&gt;
&lt;li&gt;Helsingfors vägar var jättefina. Men vägar ute huvudstadsregionen är minsann dåliga.  Mitt framhjul skadades efter resan — det blev vint! Det finns många djupa sprickor i asfalten. Kanske
vägverken kan förbättra situationen?&lt;/li&gt;
&lt;li&gt;Hydreringsdryck var tillgänglig enbart på velodromen men inte på servicepunkterna där serverades bara saft och vatten. Jag tror att hydreringsdryck är mycket bättre än saft för cyklister.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tusen tack till arrangörer för en superb upplevelse! Jag hoppas kunna fortsätta med cykellopp nästa säsongen.&lt;/p&gt;

&lt;p&gt;Titta på foton av Tour de Helsinki 2015 i Flickr album:&lt;/p&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot;  href=&quot;https://www.flickr.com/photos/vitalyrepin/albums/72157655816012213&quot; title=&quot;Tour de Helsinki 2015&quot;&gt;&lt;img src=&quot;https://farm6.staticflickr.com/5812/21107749016_a7c1d7c17a_z.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Tour de Helsinki 2015&quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Om du har gillat den här posten, kan du 
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/Tour-de-Helsinki-2015/&amp;text=Tour de Helsinki 2015. Nybörjares intryck från cykelloppet&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  dela den med dina följare&lt;/a&gt; 
eller 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  följa mig på Twitter&lt;/a&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Fixing annoying Android's 'insufficient storage available' issue</title>
   <link href="http://localhost:4000/vr/Android-InsufficientSpace/"/>
   <updated>2015-09-03T00:00:00+03:00</updated>
   <id>http://localhost:4000/Android-InsufficientSpace</id>
   <content type="html">&lt;h1&gt;The root of all evil: ridiculously small amount of free space in &amp;#39;/data&amp;#39; partition&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;/vr/public/images/Android11Gb-goal.png&quot; width=&quot;50%&quot; alt=&quot;Android 'Apps' phone screenshot&quot; align=&quot;left&quot; style=&quot;margin: 0px 15px&quot;&gt;&lt;/p&gt;

&lt;p&gt;I am happy &lt;a href=&quot;http://www.catphones.com/phones/b15q-smartphone/&quot;&gt;CAT B15&lt;/a&gt; user. So far it&amp;#39;s the only phone in my possession which survived more than 1 year — it is rugged and therefore
can cope with my lifestyle. But last months it became almost unusable because of &amp;#39;insufficient storage available&amp;#39; message which came out all the time.&lt;/p&gt;

&lt;p&gt;The reason is simple — system updates are installed to the &amp;#39;/data&amp;#39; partition which has only 1 GB and they take around half of available space.
I googled and found a lot of ridiculous solutions like &amp;#39;install app X and it will magically solve all your problems including this&amp;#39;, &amp;#39;put all apps to the SD and you will save additional 40M&amp;#39; etc.&lt;/p&gt;

&lt;p&gt;These advices sounded like a meaningless loss of time and I decided to fix the real problem which is lack of space in &amp;#39;/data&amp;#39;.
1 GB is ridiculously low limit for modern device with a lot of apps and updates for Android components.&lt;/p&gt;

&lt;p&gt;May be my way of fixing the problem can be helpful for other users of Caterpillar phones and other Android phones with similar issues.&lt;/p&gt;

&lt;!--break--&gt;

&lt;h1&gt;Step 0: Backup everything&lt;/h1&gt;

&lt;p&gt;If something goes wrong you can lose your data. Make sure to backup all the valuable content before hacking your device!&lt;/p&gt;

&lt;h1&gt;Step 1: order external SD memory card&lt;/h1&gt;

&lt;p&gt;Buy the &lt;a href=&quot;https://www.sdcard.org/developers/overview/speed_class/&quot;&gt;fastest&lt;/a&gt; and biggest SD card available. My choice was 32 GB Kingston microSD SDHC UHS-I class 10 memory card. If you want to have
more space, don&amp;#39;t forget to check phone specifications (E.g., CAT B15 supports extended storage up to 32 GB only).&lt;/p&gt;

&lt;h1&gt;Step 2: root your Android&lt;/h1&gt;

&lt;p&gt;This part is most time-consuming — find rooted firmware compatible with your phone (by the way, the file I&amp;#39;ve found was named &lt;code&gt;CAT_B15_EMEA_DS.1.041.0_Rooted.rar&lt;/code&gt;). Don&amp;#39;t be tempted by different
apps which promise you root without re-flashing. This is not what you need.&lt;/p&gt;

&lt;p&gt;Start from checking is your phone supported by &lt;a href=&quot;http://wiki.cyanogenmod.org/w/Devices&quot;&gt;cyanogen&lt;/a&gt;. Unfortunately CAT phones are not supported at the moment of writing this post.&lt;/p&gt;

&lt;h1&gt;Step 3: install adb tools for Android&lt;/h1&gt;

&lt;p&gt;Install &lt;a href=&quot;http://developer.android.com/tools/help/adb.html&quot;&gt;Android Debug Bridge&lt;/a&gt; for you platform. It&amp;#39;s part of &lt;a href=&quot;https://developer.android.com/sdk/installing/index.html&quot;&gt;Android SDK&lt;/a&gt; platform
tools.&lt;/p&gt;

&lt;h1&gt;Step 4: partitioning and formatting external SD memory card&lt;/h1&gt;

&lt;p&gt;Insert your fresh SD card to the phone and partition it. I&amp;#39;ve made 1 partition for &amp;#39;/data&amp;#39; (11 GB) and another one to be &amp;quot;usual&amp;quot; external mmc (21 GB).&lt;/p&gt;

&lt;p&gt;Partitioning is explained in more details &lt;a href=&quot;http://forum.xda-developers.com/showthread.php?t=907436&quot;&gt;here&lt;/a&gt;. I will just list the steps:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Launch adb and get shell prompt&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ su&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# fdisk /dev/block/mmcblk1&lt;/code&gt;  Be sure you are repartitioning the proper card! Otherwise you can loose all your data.&lt;/li&gt;
&lt;li&gt;Create two primary partition vfat (first!) and Linux (second) and exit fdisk with &amp;#39;w&amp;#39; command.&lt;/li&gt;
&lt;li&gt;Format newly created partitions (Again, be very careful with device names!):&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;# mke2fs -j -m0 -b4096 -Oextents,uninit_bg,dir_index /dev/block/mmcblk1p2
# mkfs.vfat /dev/block/mmcblk1p1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Reboot the phone and check that freshly created partition became visible by phone and through USB mass storage connection.&lt;/p&gt;

&lt;h1&gt;Step 5: Copy old &amp;#39;/data&amp;#39; to the new location&lt;/h1&gt;

&lt;p&gt;Now we need to transfer the data from old &amp;#39;/data&amp;#39; partition to the new one. Connect to the phone through adb again and obtain root shell.&lt;/p&gt;

&lt;p&gt;First, we need to mount new linux partition to some place, e.g:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;# mkdir /storage/sdcard0/DATAANDROID/
# mount -t ext4 /dev/block/mmcblk1p2 /storage/sdcard0/DATAANDROID/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Second, we can copy the contents of &amp;#39;/data&amp;#39; directory to the new location. Prior to doing this, disable phone network connectivity in order to prevent the &amp;#39;/data&amp;#39; content from being
modified while it is being copied to the new location.&lt;/p&gt;

&lt;p&gt;Copying itself:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;# cd /storage/sdcard0/DATAANDROID/
# cp -rp /data/* .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1&gt;Step 6: mount new &amp;#39;/data&amp;#39; during boot&lt;/h1&gt;

&lt;p&gt;Now we need to change the mounted device  for &amp;#39;/data&amp;#39; directory. Unfortunately I have not managed to find a straight-forward way to edit &amp;#39;/data&amp;#39; mount point in the timeframe I had for the task
(I will be happy to hear the proper way.  Leave your comments to this post please, I read them). So, I implemented small hack.&lt;/p&gt;

&lt;p&gt;We will re-mount &amp;#39;/data&amp;#39; partition in the very early stage of &lt;a href=&quot;https://community.freescale.com/docs/DOC-102546&quot;&gt;Android bootup process&lt;/a&gt; — before zygote is started.&lt;/p&gt;

&lt;p&gt;So, launch adb and obtain a root shell again.&lt;/p&gt;

&lt;p&gt;First, remount &amp;#39;/system&amp;#39; in read-write mode:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;# mount -o remount,rw /system
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Rename vold (Android Volume daemon) binary:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;# cd /system/bin
# mv vold vold_bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Create script &lt;code&gt;/system/bin/vold&lt;/code&gt; which mounts &amp;#39;/data&amp;#39; again and calls &lt;code&gt;vold_bin&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;#!/system/bin/sh

mount -t ext4 /dev/block/mmcblk1p2 /data

/system/bin/vold_bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Make sure it has exactly the same permissions and ownership as original vold binary!&lt;/em&gt; Output in my system:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;# ls -l vold vold_bin
-rwxr-xr-x root     shell          82 2015-09-05 09:52 vold
-rwxr-xr-x root     shell       91776 2013-03-15 10:16 vold_bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1&gt;It&amp;#39;s done!&lt;/h1&gt;

&lt;p&gt;That&amp;#39;s it. Reboot the phone and forget about &amp;#39;insufficient storage available&amp;#39; annoying problem.&lt;/p&gt;

&lt;p&gt;If you liked this post, you can
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/Android-InsufficientSpace/&amp;text=Fixing annoying Android's 'insufficient storage available' issue&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  share it with your followers&lt;/a&gt; 
or 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  follow me on Twitter&lt;/a&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Åbo omnejd. Skärgårdens ringväg med cykel / Saariston Rengastie</title>
   <link href="http://localhost:4000/vr/Abo-skargard/"/>
   <updated>2015-08-05T00:00:00+03:00</updated>
   <id>http://localhost:4000/Abo-skargard</id>
   <content type="html">&lt;style type=&quot;text/css&quot;&gt;
     #map7403af24fb4789d1da4c1f3fda2efdfb {
     width:100%;
     height:550px;
     background-color: white;
   }
  &lt;/style&gt;

&lt;div id=&quot;map7403af24fb4789d1da4c1f3fda2efdfb&quot;&gt;

&lt;/div&gt;

&lt;script&gt;
  var map = L.map('map7403af24fb4789d1da4c1f3fda2efdfb', {
    fullscreenControl: true
  }).setView([60.162818, 21.56339], 14);

  var track = new L.GeoJSON.AJAX(&quot;/vr/public/gpx/aboskargard.json&quot;, { style: {color: '#4B0082', weight: 4, opacity: 1}});
  var tileUrl = 'http://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png',
  layer = new L.TileLayer(tileUrl, {maxZoom: 18, attribution: 'Tiles courtesy of &lt;a href=&quot;http://www.thunderforest.com/opencyclemap/&quot; target=&quot;_blank&quot;&gt;OpenCycleMap&lt;/a&gt; &amp;mdash; Map data &amp;copy; &lt;a href=&quot;http://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt;'});
map.addLayer(layer);

       var locArr = [[60.16281800000001, 21.56339200000002],
                     [60.39858,21.384533000000033],
             [60.19360500000001,21.908028999999942],
             [60.376961,21.942023999999947],
             [60.47112400000001,22.01547000000005],
             [60.54414190000001,21.354319000000036],
             [60.5711454,21.831106999999975],
             [60.570192999999996,21.863696000000004],
             [60.5631733, 21.6078634],
             [60.4072845, 22.4739652],
                 [60.452443800000005,22.278552499999932]
            ];

       var descArr = [&quot;&lt;a href='https://sv.wikipedia.org/wiki/Korpo_kyrka' target='_blank'&gt;Korpo kyrka&lt;/a&gt;&quot;,
                      &quot;&lt;a href='http://www.saaristonrengastie.fi/sv/content/inio-kyrka-sophia-wilhelmina' target='_blank'&gt;Iniö kyrka&lt;/a&gt;&quot;,
              &quot;&lt;a href='https://sv.wikipedia.org/wiki/Nagu_kyrka' target='_blank'&gt;Nagu kyrka&lt;/a&gt;&quot;,
              &quot;&lt;a href='https://sv.wikipedia.org/wiki/Rimito_kyrka' target='_blank'&gt;Rimito kyrka&lt;/a&gt;&quot;,
              &quot;&lt;a href='https://sv.wikipedia.org/wiki/N%C3%A5dendals_kloster' target='_blank'&gt;Nådendals kloster&lt;/a&gt;&quot;,
              &quot;&lt;a href='http://visitkustavi.fi/index.php?option=com_content&amp;view=article&amp;id=419:den-korsbyggda-tr%C3%A4kyrkan-och-kyrkog%C3%A5rden-i-gustavs&amp;catid=188&amp;Itemid=932&amp;lang=sv' target='_blank'&gt;Träkyrkan i Gustavs&lt;/a&gt;&lt;br&gt;&quot; ,
              &quot;&lt;a href='http://www.kansallismuseo.fi/sv/villnas-slott' target='_blank'&gt;Villnäs slott&lt;/a&gt;&quot;,
              &quot;&lt;a href='https://sv.wikipedia.org/wiki/Villn%C3%A4s' target='_blank'&gt;Villnäs kyrka&lt;/a&gt;&quot;,
              &quot;&lt;a href='http://www.saaristonrengastie.fi/sv/content/tovsala-heliga-korsets-kyrka' target='_blank'&gt;Tövsala kyrka&lt;/a&gt;&quot;,
              &quot;&lt;a href='https://sv.wikipedia.org/wiki/Kust%C3%B6_biskopsborg' target='_blank'&gt;Kustö biskopsborg&lt;/a&gt;&quot;,
              &quot;&lt;a href='https://sv.wikipedia.org/wiki/%C3%85bo_domkyrka' target='_blank'&gt;Åbo domkyrka&lt;/a&gt;&quot;
              ];

       map.fitBounds(locArr);

       for (var i = 0; i &lt; descArr.length; i++) {
          L.marker(locArr[i]).addTo(map).bindPopup(descArr[i]).openPopup();
       };

      track.addTo(map);
&lt;/script&gt;

&lt;h1&gt;Vad är skärgårdens ringväg egentligen?&lt;/h1&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot; href=&quot;https://www.flickr.com/photos/vitalyrepin/7732946682/in/album-72157630932242066/&quot; title=&quot;Vägen till Rödilä&quot;&gt;&lt;img src=&quot;https://farm9.staticflickr.com/8288/7732946682_dcbf3e5aef_c.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Vägen till Rödilä&quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Åbolands skärgård ligger i skärgårdshavet nära Åbo. Skärgårdens ringväg slingrar sig mellan olika härliga holmar och öar med underbara utsikter.  Broar och små färjor
anknyter öar och kusten. Skärgården har varit bebodd mera än 3000 år. Därför finns det också intressanta historiska sevärdheter där.&lt;/p&gt;

&lt;p&gt;Åland är nära och det är möjligt att kombinera cykelfärder till Åland och skärgården. Egentligen i fjol cyklade jag &lt;a href=&quot;http://www.everytrail.com/view_trip.php?trip_id=2965087&quot;&gt;från Åbo till Stockholm genom Åbolands skärgård och Åland&lt;/a&gt;. Det var underbar upplevelse.&lt;/p&gt;

&lt;!--break--&gt;

&lt;p&gt;Det finns två resrutter med samma namn &amp;mdash; Skärgårdens Ringväg (Saariston Rengastie på finska). Den första är &lt;a href=&quot;http://saaristonrengastie.fi/sv/content/lilla-ringvagen&quot;&gt;Lilla Ringvägen&lt;/a&gt;. Den andra är den riktiga &lt;a href=&quot;http://saaristonrengastie.fi/sv/content/ruttbeskrivning&quot;&gt;skärgårdens ringväg&lt;/a&gt;. Första resrutten är kortare än andra och det är lätt att cykla över den rutten på bara en dag.&lt;/p&gt;

&lt;p&gt;Det är lätt att nå Åbo och resa bort från den staden.  Åbo är den gamla huvudstaden och det är välkopplat med hela landet genom buss, tåg och flygplan. T.ex., jag behövde åka från Åbo till Helsingfors kl. 3 på natten och jag gjorde det med hjälp av buss utan några vedermödor.&lt;/p&gt;

&lt;p&gt;Vilken säsong är bäst för ett besök? Jag föredrar sommar och höst. Hösten är skön men det är svårare att flytta sig med färjorna på hösten än på sommaren eftersom ett färre antal båtar fungerar på hösten.&lt;/p&gt;

&lt;h1&gt;Vilken resrutt är bäst?&lt;/h1&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot; href=&quot;https://www.flickr.com/photos/vitalyrepin/7774819992/in/album-72157630932242066/&quot; title=&quot;Kor på Åbolands skärgård&quot;&gt;&lt;img src=&quot;https://farm8.staticflickr.com/7270/7774819992_22b87589a8_c.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Kor på Åbolands skärgård&quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Det hänger på en tid som du har och på dina preferenser. Det är fullkomligt möjligt att cykla någon rutt på bara en dag. Men du ska inte ha en tid att bekanta dig med alla sevärdheter på vägen.&lt;/p&gt;

&lt;p&gt;Om du vill besöka sevärdheter det är bättre att cykla på lilla ringvägen på  en dag eller cykla på den sedvanliga ringvägen i en två eller även tre dagar. Om du vill bara cykla och njuta av natur och vägen, cykla på lilla ringvägen med terrängcykel eller på verklig ringvägen med racercykel.&lt;/p&gt;

&lt;p&gt;Jag tror du ska inte vara besviken om du cykla genom skärgården ringväg &amp;mdash; antingen lilla eller sedvanlig. Oavsett vilken rutt du väljer, är det viktigt att planera din färd. Den viktigaste plandelen är färjetidtabeller. Om du felar där, kan du låsa dig på en ö utan någon möjlighet att fortsätta din färd den där dagen.&lt;/p&gt;

&lt;h1&gt;Planering: GPS rutter, färjetidtabeller, bussar, tåg och vandrarhem&lt;/h1&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot; href=&quot;https://www.flickr.com/photos/vitalyrepin/7718856014/in/album-72157630932242066/&quot; title=&quot;Färjan från Hanka till Nagu&quot;&gt;&lt;img src=&quot;https://farm9.staticflickr.com/8430/7718856014_5fafc42503_c.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Färjan från Hanka till Nagu&quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Jag cyklade alltid motsols (T.ex., Gustavs -&amp;gt; Iniö riktning). Av den anledningen att det är lättare att planera färjresor.&lt;/p&gt;

&lt;h2&gt;Kartor:&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.mapmytracks.com/explore/activity/1576656&quot;&gt;Lilla Ringvägen&lt;/a&gt;. Du kan &lt;a href=&quot;/vr/public/gpx/LillaSkargard.gpx&quot;&gt;ladda ner GPX rutten&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;(Verklig) &lt;a href=&quot;http://www.everytrail.com/view_trip.php?trip_id=3183466&quot;&gt;Ringvägen&lt;/a&gt; Tyvärr, den GPX rutten är inte komplett. &lt;a href=&quot;/vr/public/gpx/skargard.gpx&quot;&gt;Ladda ner GPX rutten&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://saaristonrengastie.fi/sv/content/ruttbeskrivning&quot;&gt;Den officiella ringvägen ruttbeskrivningen&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Färjar:&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.finferries.fi/sv/farjetrafik/farjplatserna-och-tidtabellerna.html&quot;&gt;Skärgårdens färjplatser och tidtabeller&lt;/a&gt;. De följande båtarna åker sällan:

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.finferries.fi/sv/farjetrafik/farjplatserna-och-tidtabellerna/inio-gustavs-aurora.html&quot;&gt;Iniö-Gustavs, m/s Aurora&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.finferries.fi/sv/farjetrafik/farjplatserna-och-tidtabellerna/skargardens-ringvag-houtskar-inio.html&quot;&gt;Houtskär - Iniö, m/s Antonia&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.finferries.fi/sv/farjetrafik/farjplatserna-och-tidtabellerna/korpo-houtskar.html&quot;&gt;Korpo-Houtskär, m/s Stella och m/s Mergus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.ostern.fi/aikataulu&quot;&gt;Nagu-Själö-Hanka, m/s Östern&lt;/a&gt; Du behöver absolut den färjan på Lilla Ringvägen!&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Om du vill fortsätta fram till Åland, kan du ta de följande båtarna:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.alandstrafiken.ax/sites/www.alandstrafiken.ax/files/osnas-ava_2.pdf&quot;&gt;Osnäs - Åva, Norra linjen&lt;/a&gt; Den färjan kopplar Gustavs och Brändö, Åland.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.alandstrafiken.ax/sites/www.alandstrafiken.ax/files/sodralinjen.pdf&quot;&gt;Galtby - Kökar, Södra linjen&lt;/a&gt; Den färjan kopplar Korpo och  Åland öar.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Bussar och tåg:&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.vr.fi/cs/vr/sv/etusivu_sv&quot;&gt;Finska järnvägar&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://matkahuolto.fi/sv/&quot;&gt;Matkahuolto bussar&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.onnibus.com/en/timetables.htm&quot;&gt;Onnibus bussar&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Matkahuolto är dyrare än Onnibus men de har aldrig vedermödor med cykel baggage. VR biljetter är de dyraste och det finns brist på cykelplatser på VR tåg.&lt;/p&gt;

&lt;h2&gt;Boende&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://skargardsbokning.fi/?l=sv&amp;p=majoitus&quot;&gt;Skärgårdsbokning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.visitaland.com/bo-aland/&quot;&gt;Åland boendealternativ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Mitt favorithotell på Åland är &lt;a href=&quot;http://www.gullvivan.ax/&quot;&gt;Gullvivan&lt;/a&gt; på Brändö.&lt;/p&gt;

&lt;h1&gt;Berömda sevärdheter&lt;/h1&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot; href=&quot;https://www.flickr.com/photos/vitalyrepin/7718507264/in/album-72157630932242066/&quot; title=&quot;Inuti Nagu kyrka&quot;&gt;&lt;img src=&quot;https://farm9.staticflickr.com/8428/7718507264_a2624565e4_c.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Inuti Nagu kyrka&quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Jag gillar att bekanta mig med gamla kyrkor. Den rutten är ett paradis för en man som jag eftersom du kan känna en fläkt av Historia (med stora &amp;quot;H&amp;quot;) där.&lt;/p&gt;

&lt;p&gt;Medeltida kyrkor:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.saaristonrengastie.fi/sv/content/tovsala-heliga-korsets-kyrka&quot;&gt;Tövsala kyrka,  byggd på 1300-talet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://sv.wikipedia.org/wiki/Korpo_kyrka&quot;&gt;Korpo kyrka, byggd i slutet av 1200-talet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://sv.wikipedia.org/wiki/Nagu_kyrka&quot;&gt;Nagu kyrka, byggd på 1440-talet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://sv.wikipedia.org/wiki/Rimito_kyrka&quot;&gt;Rimito kyrka, byggd  i början av 1300-talet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://sv.wikipedia.org/wiki/N%C3%A5dendals_kloster&quot;&gt;Nådendals kloster. Det var verksamt från 1438 till 1591&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://sv.wikipedia.org/wiki/%C3%85bo_domkyrka&quot;&gt;Åbo domkyrka, byggd i slutet av 1200-talet&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Fina gamla kyrkor:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://visitkustavi.fi/index.php?option=com_content&amp;view=article&amp;id=419:den-korsbyggda-tr%C3%A4kyrkan-och-kyrkog%C3%A5rden-i-gustavs&amp;catid=188&amp;Itemid=932&amp;lang=sv&quot;&gt;Träkyrkan i Gustavs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.saaristonrengastie.fi/sv/content/inio-kyrka-sophia-wilhelmina&quot;&gt;Iniö kyrka, byggd under åren 1797-1800&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Om du är intresserad av finsk historia även lite, vet du namnet på &lt;a href=&quot;https://sv.wikipedia.org/wiki/Gustaf_Mannerheim&quot;&gt;friherre Mannerheim&lt;/a&gt;.
Han var född och tillbringade sin barndom i &lt;a href=&quot;http://www.kansallismuseo.fi/sv/villnas-slott&quot;&gt;Villnäs slott&lt;/a&gt;. Museet är mycket imponerande. Glöm inte att besöka det!&lt;/p&gt;

&lt;p&gt;Du kan hitta mera intressanta sevärdheter i böker om skärgården och på Internet. Jag ska påpeka blott få källor här:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://haku.helmet.fi/iii/encore/record/C__Rb1988945__Slauri%20hokkinen__P0%2C4__Orightresult__U__X4?lang=swe&amp;suite=cobalt&quot;&gt;Rengastietä Turun saaristoon. The Archipelago Trail : experience the Islands of Turku av Lauri Hokkinen&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://saaristonrengastie.fi/sv/palvelut/nahtavyydet&quot;&gt;Den officialla turistinformationen&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1&gt;Vi ses på Skärgården!&lt;/h1&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot; href=&quot;https://www.flickr.com/photos/vitalyrepin/7719065510/in/album-72157630932242066/&quot; title=&quot;Genom Skärgården med cykel&quot;&gt;&lt;img src=&quot;https://farm8.staticflickr.com/7252/7719065510_5f1de1a504_c.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Genom Skärgården med cykel&quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Jag hoppas att råka er, mina kära läsare, i skärgården! Det är en underbar upplevelse att cykla genom Åbolands skärgård på ringvägen. Vänta inte, cykla nu!&lt;/p&gt;

&lt;p&gt;Titta på mina foton och videofilmer av skärgården i Flickr album (45 foton och 12 videofilmer inne):&lt;/p&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot; href=&quot;https://www.flickr.com/photos/vitalyrepin/sets/72157656704669155&quot; title=&quot;Åbolands skärgård&quot;&gt;&lt;img src=&quot;https://farm4.staticflickr.com/3846/19255193440_c5d9b7d10b_c.jpg&quot; width=&quot;100%&quot; height=&quot;100%&quot; alt=&quot;Åbolands skärgård &quot;&gt;&lt;/a&gt;&lt;script async src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Om du har gillat den här posten, kan du 
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/Abo-skargard/&amp;text=Åbo omnejd. Skärgårdens ringväg med cykel / Saariston Rengastie&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  dela den med dina följare&lt;/a&gt; 
eller 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  följa mig på Twitter&lt;/a&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[ipsec, iptables, ebtables] How to avoid leakage of packets addressed to/from private IP space</title>
   <link href="http://localhost:4000/vr/IPsec-PacketLeakage/"/>
   <updated>2015-07-30T00:00:00+03:00</updated>
   <id>http://localhost:4000/IPsec-PacketLeakage</id>
   <content type="html">&lt;h1&gt;Background&lt;/h1&gt;

&lt;p&gt;I&amp;#39;ve been asked by &lt;a href=&quot;https://seed4.me/&quot;&gt;SEED4.ME VPN&lt;/a&gt; to investigate the package leakaging issue in their environment raised after delivering new VPN features for Apple devices.&lt;/p&gt;

&lt;p&gt;We&amp;#39;ve agreed that we do want not only to solve this particular problem with Apple IPsec, but
&lt;em&gt;to build a fence system which can completely eliminate any packet leaking problems in future caused by any bug, feature, misconfiguration etc.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;I hope results of this small project can be useful for other engineers facing similar challenges.&lt;/p&gt;

&lt;h1&gt;Problem: packet leakage&lt;/h1&gt;

&lt;p&gt;Packets belonging to &lt;a href=&quot;http://en.wikipedia.org/wiki/Private_network&quot;&gt;private IP address space&lt;/a&gt; shall not appear in the network interfaces which do not belong to private networks.&lt;/p&gt;

&lt;p&gt;Typical example is VPS hosted in the cloud. If it sends packets addressed to private IP address space through its external NIC, it usually means that something wrong is happening.
More providers started to implement &lt;a href=&quot;http://www.bcp38.info/index.php/Main_Page&quot;&gt;BCP38&lt;/a&gt; RFC for defeating  Denial of Service Attacks which employ IP Source Address Spoofing.
They block such packets and complain to VPS administrators.&lt;/p&gt;

&lt;p&gt;However, &lt;a href=&quot;http://en.wikipedia.org/wiki/List_of_Latin_phrases_%28E%29#errare_humanum_est&quot;&gt;&lt;em&gt;errare humanum est&lt;/em&gt;&lt;/a&gt; &amp;mdash; administrators are people too. Typical cases are &lt;a href=&quot;http://www.smythies.com/%7Edoug/network/iptables_notes/index.html&quot;&gt;NAT&lt;/a&gt;- and &lt;a href=&quot;http://marc.info/?l=netfilter&amp;m=143654558816715&amp;w=2&quot;&gt;IPsec&lt;/a&gt;-related.&lt;/p&gt;

&lt;p&gt;This article describes &lt;a href=&quot;https://en.wikipedia.org/wiki/Defense_in_depth_%28computing%29&quot;&gt;Castle Approach&lt;/a&gt; to this problem. An idea is simple:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Leaked packets are filtered by Linux firewall (netfilter iptables)&lt;/li&gt;
&lt;li&gt;If packets are not filtered by Linux firewall, they are filtered by Linux ethernet bridging firewall (netfilter ebtables). In the same time, they are logged and became visible to the monitoring system&lt;/li&gt;
&lt;/ol&gt;

&lt;!--break--&gt;

&lt;p&gt;Ebtables is used as last line of defense. It has additional benefit &amp;mdash; usually ebtables rules are simple (if they even exist!) and iptables rules can be very complex, managed with sophisticated tools etc. As a result, it&amp;#39;s much easier to make a mistake managing iptables than ebtables &lt;sup id=&quot;fnref1&quot;&gt;&lt;a href=&quot;#fn1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;h1&gt;IPsec: dropping packets without a matched policy&lt;/h1&gt;

&lt;p&gt;Create a drop rule in filter FORWARD, that drops incoming packets for SNATed IPs without a matching policy: &lt;sup id=&quot;fnref2&quot;&gt;&lt;a href=&quot;#fn2&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;iptables -A FORWARD -d &amp;lt;src&amp;gt; -m policy --pol none --dir out -j DROP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;src&amp;gt;&lt;/code&gt; is your IPSEC VPN network. E.g., &lt;code&gt;10.57.0.0/16&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This is our first line of defense. Don&amp;#39;t forget to test that it really works (e.g., by adding logging)!&lt;/p&gt;

&lt;p&gt;This step really depends on your networking configuration. Example above is valid for IPsec VPN implementation based on &lt;a href=&quot;http://man7.org/linux/man-pages/man8/ip-xfrm.8.html&quot;&gt;xfrm&lt;/a&gt;.&lt;/p&gt;

&lt;h1&gt;Ebtables as last line of defense&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;http://ebtables.netfilter.org/&quot;&gt;ebtables&lt;/a&gt;  is a filtering tool for a Linux-based bridging firewall. It works in the link layer.&lt;/p&gt;

&lt;p&gt;We will use it to log and drop unwanted packets. Presence of ebtables logs is a signal to administrator that something wrong has happened &amp;mdash; packets were not filtered in the higher layers
and reached link layer.&lt;/p&gt;

&lt;h2&gt;Filtering by IP with ebtables: goal setting&lt;/h2&gt;

&lt;p&gt;Our goal is to drop all the packets addressed to private networks from your external network interface. Filtering mechanism should also support exceptions. In other words, it shall be possible
to allow packets addressed to certain (exceptional) private networks to flow through external network interface.&lt;/p&gt;

&lt;p&gt;We will suppose that your network interface is called eth0.&lt;/p&gt;

&lt;h2&gt;Step 1: Enable network bridge functionality&lt;/h2&gt;

&lt;p&gt;ebtables works with network bridges. It means we need to have one. First, make sure your kernel supports network bridges. Set &amp;quot;networking -&amp;gt; 802.1d Ethernet Bridging&amp;quot; to either yes or module.&lt;/p&gt;

&lt;p&gt;Second, check that bridge device can be created:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;# ip link add name br0 type bridge
# ifconfig br0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Step 2: Enable ebtables filtering&lt;/h2&gt;

&lt;p&gt;Make sure &lt;a href=&quot;http://ebtables.netfilter.org/misc/ebtables-faq.html#quiz1&quot;&gt;your kernel supports ethernet bridge tables functionality&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Then install ebtables utility. Installation command for Ubuntu:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;apt-get install ebtables
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check that command line &lt;code&gt;ebtables -L&lt;/code&gt; shows you an empty output for all three chains &amp;mdash; &lt;em&gt;FORWARD, OUTPUT&lt;/em&gt; and &lt;em&gt;INPUT&lt;/em&gt;.&lt;/p&gt;

&lt;h2&gt;Step 3: Create a bridge and add physical network interface to it&lt;/h2&gt;

&lt;p&gt;We need to have a bridge with only one network card connected (eth0). It means that you need to configure bridge IP address to be the same as it is currently set for your NIC. And change routing.&lt;/p&gt;

&lt;p&gt;It is done through network interfaces configuration.&lt;/p&gt;

&lt;p&gt;E.g., in Ubuntu you need to change &lt;code&gt;/etc/network/interfaces&lt;/code&gt; file in the following manner:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;auto br0

iface eth0 inet manual
up ip link set eth0 up
up ip link set dev eth0 promisc on

down ip link set eth0 promisc off
down ip link set eth0 down

# The local network bridge
iface br0 inet static
  bridge_ports eth0
  bridge_stp off       # disable Spanning Tree Protocol
  bridge_waitport 0    # no delay before a port becomes available
  bridge_fd 0          # no forwarding delay
  address &amp;lt;IP address of your host&amp;gt;
  netmask &amp;lt;netmask of your host&amp;gt;
  gateway &amp;lt;default gateway&amp;gt;
  metric 1
  post-up ip link set dev br0 promisc on
  post-up /usr/local/bin/ebtables-filter.sh br0
  post-down ebtables -F
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Most of the parameters are obvious. Several comments:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;We set &lt;a href=&quot;https://en.wikipedia.org/wiki/Promiscuous_mode&quot;&gt;promiscuous mode&lt;/a&gt; for &lt;code&gt;eth0&lt;/code&gt; and &lt;code&gt;br0&lt;/code&gt;. This mode is activated after bringing the interfaces up.  This step seems to be
unnecessary in the recent kernels (4.1.0 and later).&lt;/li&gt;
&lt;li&gt;Filtering is activated by the script &lt;code&gt;ebtables-filter.sh&lt;/code&gt; which is launched after bridge interface came up.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Step 4: Filtering&lt;/h2&gt;

&lt;p&gt;Filtering script &lt;code&gt;/usr/local/bin/ebtables-filter.sh&lt;/code&gt; is relatively simple:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;#!/bin/sh&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;# Bridge interface to add rules for. Typically br0&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;IFACE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;br0

&lt;span class=&quot;c1&quot;&gt;# Networks to block: private addresses as defined in RFC 1918&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;BLK_ADDR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10.0.0.0/8 172.16.0.0/12 192.168.0.0/16&amp;quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Private networks to NOT block: e.g. they are used to connect to the VPN console&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;UNBLK_ADDR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;192.168.2.0/24&amp;quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# First - adding exceptions&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; addr in &lt;span class=&quot;nv&quot;&gt;$UNBLK_ADDR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  ebtables -A OUTPUT -p IPv4 --ip-destination &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt;  -j ACCEPT
  ebtables -A FORWARD -i &lt;span class=&quot;nv&quot;&gt;$IFACE&lt;/span&gt; -p IPv4 --ip-destination &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt;  -j ACCEPT
  ebtables -A OUTPUT -p IPv4 --ip-source &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt; -j ACCEPT
  ebtables -A FORWARD -i &lt;span class=&quot;nv&quot;&gt;$IFACE&lt;/span&gt; -p IPv4 --ip-source &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt; -j ACCEPT
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Second - adding blocked networks&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; addr in &lt;span class=&quot;nv&quot;&gt;$BLK_ADDR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Log leaks&lt;/span&gt;
  ebtables -A OUTPUT  -p IPv4 --ip-destination &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt;  --log-level info --log-ip --log-prefix &lt;span class=&quot;s2&quot;&gt;&amp;quot;EBTABLES-BLKO&amp;quot;&lt;/span&gt;
  ebtables -A FORWARD -i &lt;span class=&quot;nv&quot;&gt;$IFACE&lt;/span&gt; -p IPv4 --ip-destination &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt;  --log-level info --log-ip --log-prefix &lt;span class=&quot;s2&quot;&gt;&amp;quot;EBTABLES-BLKF&amp;quot;&lt;/span&gt;
  ebtables -A OUTPUT  -p IPv4 --ip-source &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt;  --log-level info --log-ip --log-prefix &lt;span class=&quot;s2&quot;&gt;&amp;quot;EBTABLES-BLKO&amp;quot;&lt;/span&gt;
  ebtables -A FORWARD -i &lt;span class=&quot;nv&quot;&gt;$IFACE&lt;/span&gt; -p IPv4 --ip-source &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt;  --log-level info --log-ip --log-prefix &lt;span class=&quot;s2&quot;&gt;&amp;quot;EBTABLES-BLKF&amp;quot;&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;# Drop leaks&lt;/span&gt;
  ebtables -A OUTPUT -p IPv4 --ip-destination &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt;  -j DROP
  ebtables -A FORWARD -i &lt;span class=&quot;nv&quot;&gt;$IFACE&lt;/span&gt; -p IPv4 --ip-destination &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt;  -j DROP
  ebtables -A OUTPUT -p IPv4 --ip-source &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt; -j DROP
  ebtables -A FORWARD -i &lt;span class=&quot;nv&quot;&gt;$IFACE&lt;/span&gt; -p IPv4 --ip-source &lt;span class=&quot;nv&quot;&gt;$addr&lt;/span&gt; -j DROP
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It instructs ebtables to drop all packets which are coming from or addressed to private networks. In order to support exceptions we set acceptance rules in the beginning &amp;mdash;
the packets which are coming from or to these networks will not be dropped. Every chain has a different logging prefix which makes it easier for the reader of log files to understand
where the packet was caught.&lt;/p&gt;

&lt;h2&gt;Step 5: Test your setup&lt;/h2&gt;

&lt;p&gt;We are done. Now it&amp;#39;s time to test your setup. If any packet is dropped, it is also logged into you logging system (the same way iptables logs their packets if requested to do so)
and you can easily monitor these logs in your network monitoring platform.&lt;/p&gt;

&lt;p&gt;If you have any questions, comments, improvements ideas, don&amp;#39;t hesitate to comment under this post!&lt;/p&gt;

&lt;p&gt;If you liked this post, you can
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/IPsec-PacketLeakage/&amp;text=[ipsec, iptables, ebtables] How to avoid leakage of packets addressed to/from private IP space&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  share it with your followers&lt;/a&gt; 
or 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  follow me on Twitter&lt;/a&gt;!&lt;/p&gt;

&lt;div class=&quot;footnotes&quot;&gt;
&lt;hr&gt;
&lt;ol&gt;

&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;Ebtables and iptables are userland utilities to manage Linux kernel firewall, they are NOT filtering anything by themselves. This article uses &amp;quot;ebtables&amp;quot; as a synonym to &amp;quot;Linux-based bridging firewall&amp;quot;. &amp;quot;iptables&amp;quot; is used in a similar manner.&amp;nbsp;&lt;a href=&quot;#fnref1&quot; rev=&quot;footnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;Adapted from &lt;a href=&quot;http://marc.info/?l=netfilter&amp;m=143654576916745&amp;w=2&quot;&gt;Noel Kuntze&amp;#39;s post&lt;/a&gt;.&amp;nbsp;&lt;a href=&quot;#fnref2&quot; rev=&quot;footnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;/ol&gt;
&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to automatically deploy static web site to the hosting</title>
   <link href="http://localhost:4000/vr/JekyllDeploy/"/>
   <updated>2015-07-09T00:00:00+03:00</updated>
   <id>http://localhost:4000/JekyllDeploy</id>
   <content type="html">&lt;h1&gt;The problem: publishing your web site efficiently&lt;/h1&gt;

&lt;p&gt;When web site is updated on a regular basis (as it happens with blogs)  it becomes important to automate the process of uploading site to the hosting. Using cpanel or FTP is boring and
time-consuming. &lt;/p&gt;

&lt;p&gt;The goal is to be able to sync the static-generated content (e.g., &lt;em&gt;_site&lt;/em&gt; directory generated by &lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;) with just one command. My post refers to &lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; and &lt;a href=&quot;http://www.hostgator.com/&quot;&gt;hostgator&lt;/a&gt; but the
methods suggested are not limited to these platforms &amp;mdash; they are applicable to any static-generated web content.&lt;/p&gt;

&lt;!--break--&gt;

&lt;h1&gt;Possible solutions&lt;/h1&gt;

&lt;p&gt;Three approaches are dominating:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Use Jekyll-friendly web hosting. E.g., &lt;a href=&quot;https://help.github.com/articles/using-jekyll-with-pages/&quot;&gt;GitHub Pages&lt;/a&gt;. In this case you just need to push Jekyll files to the repository, server takes them and builds your web site. This approach limits the number of available hosting platforms and Jekyll features which can be used. E.g., it will not be possible to install custom plugins to Jekyll.&lt;/li&gt;
&lt;li&gt;Put generated web site into git repository and sync using git. Arlo Carreon &lt;a href=&quot;http://www.arlocarreon.com/blog/git/push-git-repo-into-shared-hosting-account-like-hostgator/&quot;&gt;describes this approach in detail&lt;/a&gt;. It&amp;#39;s not my choice &amp;mdash; I find it awkward to put generated files under source version control. It also introduces stupid problems &amp;mdash; like a need to add and remove these files from a repository, put meaningless comments for commits etc.&lt;/li&gt;
&lt;li&gt;Torrents and RSS feed. This is a great method to deploy static content over many servers. Requires relatively complicated setup and is typically used with VPS servers. Probably an overkill for a simple web-site like a blog.&lt;/li&gt;
&lt;li&gt;Use &lt;a href=&quot;https://en.wikipedia.org/wiki/Rsync&quot;&gt;rsync&lt;/a&gt;.  This is my choice. It&amp;#39;s fast, straight-forward and logical. It just replicates the files from your computer to the hosting server.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I will describe rsync-based solution in detail. You need to have (user, non-root) ssh access to the hosting server in order to use this approach.&lt;/p&gt;

&lt;h1&gt;Step 1: Install rrsync to your home folder (server-side)&lt;/h1&gt;

&lt;p&gt;We will use certificate-based authorization to simplify the publishing process. It makes sense to restrict rsync access only to the directory which it is supposed to sync.&lt;/p&gt;

&lt;p&gt;That&amp;#39;s why rrsync wrapper shall be installed. If it is not already installed by your hoster you can do it yourself:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://ftp.samba.org/pub/unpacked/rsync/support/rrsync&quot;&gt;download rrsync&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Put it to the bin subdirectory of your home folder  (&lt;code&gt;~/bin&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Make it executable (&lt;code&gt;chmod +x&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;h1&gt;Step 2: Setup certificate-based ssh access (server side)&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.gentoo.org/wiki/SSH#Passwordless_Authentication&quot;&gt;This process is described in a lot of places in the net&lt;/a&gt;. I will not explain it in details here. What is different from usual approach is to put the
restriction to certificate-based authorization in &lt;code&gt;~/.ssh/authorized_key&lt;/code&gt;). We will launch &lt;code&gt;rrsync&lt;/code&gt; utility and supply it with the folder it shall have read-write access to:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;command=&amp;quot;$HOME/bin/rrsync &amp;lt;folder&amp;gt;&amp;quot;,no-agent-forwarding,no-port-forwarding,no-pty,no-user-rc,no-X11-forwarding ssh-rsa &amp;lt;cert&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;folder&amp;gt;&lt;/code&gt; is the path to your site. E.g., &lt;code&gt;~/public_html/you.org/blog-html/&lt;/code&gt;.&lt;/p&gt;

&lt;h1&gt;Step 3: Rsync! (client-side)&lt;/h1&gt;

&lt;p&gt;Add the script &lt;code&gt;transfer.sh&lt;/code&gt; to the web site source folder:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;#!/bin/sh&lt;/span&gt;

rsync -avr --rsh&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;ssh -p2222&amp;#39;&lt;/span&gt; --delete-after --delete-excluded   &amp;lt;folder&amp;gt; &amp;lt;user&amp;gt;@&amp;lt;site&amp;gt;:&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Command line parameters are:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--rsh=&amp;#39;ssh -p2222&amp;#39;&lt;/code&gt; It is needed if your hoster provides ssh access using ssh port different from default one (e.g., this is what hostgator is doing)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;folder&amp;gt;&lt;/code&gt; is the name of the local folder with generated web content. By default it is &lt;code&gt;_site/&lt;/code&gt; for Jekyll&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;user&amp;gt;&lt;/code&gt; &amp;mdash; ssh user name for your hosting account&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;site&amp;gt;&lt;/code&gt; &amp;mdash; your hosting server&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My command line is:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span&gt;&lt;/span&gt;rsync -avr --rsh&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;ssh -p2222&amp;#39;&lt;/span&gt; --delete-after --delete-excluded   _site/ hostuser@vrepin.org:&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Don&amp;#39;t forget column &amp;#39;:&amp;#39; after server name!&lt;/p&gt;

&lt;h1&gt;Optional step 4: exclude transfer.sh from being copied to the output folder by Jekyll&lt;/h1&gt;

&lt;p&gt;This step is recommended if you use this how-to to deploy Jekyll-based web site. If you put &lt;code&gt;transfer.sh&lt;/code&gt; script to the root folder of your project, Jekyll copies it to the output folder.
This behavior can be changed in &lt;code&gt;_config.yml&lt;/code&gt;. Just add the following line there:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Do not copy these file to the output directory&lt;/span&gt;
&lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p p-Indicator&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;transfer.sh&amp;quot;&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;README.md&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h1&gt;We are done!&lt;/h1&gt;

&lt;p&gt;Now it&amp;#39;s possible to publish your web site by launching &lt;code&gt;./transfer.sh&lt;/code&gt; script. If your ssh certificate  is &lt;a href=&quot;https://martin.kleppmann.com/2013/05/24/improving-security-of-ssh-private-keys.html&quot;&gt;passphrase-protected&lt;/a&gt;, you are asked to enter the password.&lt;/p&gt;

&lt;p&gt;It was simple, wasn&amp;#39;t it?&lt;/p&gt;

&lt;p&gt;If you have any questions, comments, improvements ideas - don&amp;#39;t hesitate to comment under this post!&lt;/p&gt;

&lt;p&gt;If you liked this post, you can
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/JekyllDeploy/&amp;text=How to automatically deploy static web site to the hosting&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  share it with your followers&lt;/a&gt; 
or 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  follow me on Twitter&lt;/a&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Is ECB really enemy of the euro? More on Bagehot's rule</title>
   <link href="http://localhost:4000/vr/Bagehot-ECB/"/>
   <updated>2015-07-07T00:00:00+03:00</updated>
   <id>http://localhost:4000/Bagehot-ECB</id>
   <content type="html">&lt;h2&gt;ECB did not follow Bagehot&amp;#39;s rule&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/mesandbu&quot;&gt;Martin Sandbu&lt;/a&gt; criticizes ECB for its course of action in the weeks before voting in Greece &lt;a href=&quot;https://d396qusza40orc.cloudfront.net/money2/Free%20Lunch_%20ECB%2C%20enemy%20of%20the%20euro_%20-%20FT.pdf&quot;&gt;(Financial Times, July 6)&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Recall that the closure of Greece&amp;#39;s banks was caused by the ECB&amp;#39;s decision to do the opposite of what Walter Bagehot taught, which that to steam a bank run,
the central bank should lend against collateral that, but for the crisis, is solid. In Grece fearful people have wanted cash, but the banks have little cash left.
The normal course of action would be for the banks to get cash from the central bank, pledging their investments as security for the loan. But after Athens declared a referendum,
the ECB said no further such loans should (for now) be given.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Martin&amp;#39;s article has a plenty of interesting and valuable comments. However, in order to see bigger picture it makes sense to examine Bagehot&amp;#39;s rule a little bit deeper.&lt;/p&gt;

&lt;!--break--&gt;

&lt;h2&gt;What is Bagehot&amp;#39;s rule?&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Walter_Bagehot&quot;&gt;Walter Bagehot&lt;/a&gt; suggested the rule also known as &lt;a href=&quot;https://en.wikipedia.org/wiki/Lombard_Street:_A_Description_of_the_Money_Market#Lender_of_last_resort&quot;&gt;Bagehot&amp;#39;s dictum&lt;/a&gt; which is widely accepted by central banks till now [1, p. 198-199]:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;In time of panic it must advance freely and vigorously to the public out of the reserve &lt;sup id=&quot;fnref1&quot;&gt;&lt;a href=&quot;#fn1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;These loans shall be made at a very high rate of interest&lt;/li&gt;
&lt;li&gt;These advances should be made on all good banking securities, and as largely as the public asks for them&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This rule is often summarized as: &lt;em&gt;To avert panic, central banks should lend early and freely (i.e. without limit), to solvent firms, against good collateral, and at high rates.&lt;/em&gt;&lt;/p&gt;

&lt;h2&gt;Bagehot&amp;#39;s rule - when to apply?&lt;/h2&gt;

&lt;p&gt;It&amp;#39;s important  to note that Bagehot&amp;#39;s rule is not for daily operations of the central bank. It is a policy of the central bank to stop panic.
And Bagehot did not offer it as a silver bullet [1, ch. VII, p. 201]:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This policy may not save the Bank; but if it do not, nothing will save it.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Bagehot offered an extensive argumentation to defend this rule which in his time was not obvious not only for the public but even for the Bank administration.&lt;/p&gt;

&lt;p&gt;In particular, he explains [1, ch. VII, p. 199-200]:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The way to cause alarm is to refuse (to make advances - V.R.) someone who has good security to offer. The news of this will spread in an instant through all the Money Market at a moment
of terror.&lt;/li&gt;
&lt;li&gt;Unsound people are a feeble minority, and they are afraid even to look frightened for fear their unsoundness may be detected.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;As you see the ultimate goal for Bagehot is to stop spreading of panic.&lt;/p&gt;

&lt;h2&gt;ECB and Greece in 2015&lt;/h2&gt;

&lt;p&gt;Why ECB was able to refuse to make advances to Greek banks? Just because there was no panic in Europe. And there was no risk of it.
The goal of Bagehot&amp;#39;s rule is to prevent panic. But the panic was not European. It was local (Greek-only) panic.&lt;/p&gt;

&lt;p&gt;If the situation was opposite - e.g., panic could spread from Greece to other European countries then ECB had no choice but to follow Bagehots&amp;#39; rule. As it was doing before!&lt;/p&gt;

&lt;p&gt;It does not mean that ECB selected right course of actions. I agree with Martin that ECB did not act as a central bank for Greece. But it was able to choose this path. Just because there was
no market pressure.&lt;/p&gt;

&lt;p&gt;Bagehot suggested his rule in the times when Bank of England was a private company. Bank followed it not because of its public duties or legislation or any moral considerations.
&lt;em&gt;It was following this rule because it  was for the benefit of the bank itself.&lt;/em&gt; I think this is the point which shall not be missed when we are analyzing ECB behavior.&lt;/p&gt;

&lt;p&gt;Interesting question arises - is ECB acting as a central bank of EU as a whole or as a central bank of each individual country? It looks like ECB acts as a central bank for the whole EU.
And it explains why it did what it did with Greece.&lt;/p&gt;

&lt;p&gt;Another interesting question is - how deep EU economies are integrated? I doubt if the panic of Greek caliber starts in California, Fed is forced to execute Bagehot&amp;#39;s rule
in order to stop the panic for spreading through US. And it was not the case with one of the European countries - Greece.&lt;/p&gt;

&lt;h2&gt;Bibliography&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.econlib.org/library/Bagehot/bagLom.html&quot;&gt;Lombard Street: A Description of the Money Market.&lt;/a&gt; Walter Bagehot, 1873. Reprinted Wiley, New York 1999.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you liked this post, you can
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/Bagehot-ECB/&amp;text=Is ECB really enemy of the euro? More on Bagehot's rule&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  share it with your followers&lt;/a&gt; 
or 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  follow me on Twitter&lt;/a&gt;!&lt;/p&gt;

&lt;div class=&quot;footnotes&quot;&gt;
&lt;hr&gt;
&lt;ol&gt;

&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;&amp;quot;It&amp;quot; refers to the Bank of England which was acting as a central bank in Bagehot&amp;#39;s time.&amp;nbsp;&lt;a href=&quot;#fnref1&quot; rev=&quot;footnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;/ol&gt;
&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Jekyll: how to add metadata to your site</title>
   <link href="http://localhost:4000/vr/JekyllMeta/"/>
   <updated>2015-06-29T00:00:00+03:00</updated>
   <id>http://localhost:4000/JekyllMeta</id>
   <content type="html">&lt;p&gt;You&amp;#39;ve created web site with Jekyll and are trying to post links to the social network of your choice.  Oops! No summary appears under your link!
The reason is that the service needs metadata for the page.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Meta data helps in a lot of ways. Sharing in social networks is just one example. Don&amp;#39;t think that if you do not use social networks, your web site does not need meta data.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I will summarize important meta tags and the ways to add them to Jekyll-based site.  If you have something to add &amp;mdash; don&amp;#39;t hesitate and leave your feedback in the comments, pls!&lt;/p&gt;

&lt;!--break--&gt;

&lt;h2&gt;Classics: HTML meta tags&lt;/h2&gt;

&lt;p&gt;Meta tags &lt;em&gt;description&lt;/em&gt; and &lt;em&gt;keywords&lt;/em&gt; can be generated from your post YAML front matter. Add these lines to your template (&lt;em&gt;_includes/head.html&lt;/em&gt; in my theme):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-liquid&quot; data-lang=&quot;liquid&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&amp;lt;meta name=&amp;quot;description&amp;quot; content=&amp;quot;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;escape&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;&amp;quot;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;
{%&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;endif&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;%}
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&amp;lt;meta name=&amp;quot;keywords&amp;quot; content=&amp;quot;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;, &amp;#39;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;escape&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;&amp;quot;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;
{%endif&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;%}&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;If fields &lt;em&gt;tags&lt;/em&gt; and &lt;em&gt;summary&lt;/em&gt; are set for the page, they appear in the generated HTML meta data. Pay attention to the way &lt;em&gt;tags&lt;/em&gt; are set &amp;mdash; it&amp;#39;s an array.
&lt;a href=&quot;/vr/Tagging/&quot;&gt;Read more about tagging practices in Jekyll.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;YAML front matter example:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;How to add metadata to the Jekyll-based site&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;google sitemap xml, Open Graph and plain old &amp;quot;meta&amp;quot;-tags.&lt;/span&gt;
&lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p p-Indicator&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;jekyll&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;blogging&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;facebook&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2&gt;Search engines: sitemap&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Sitemaps&quot;&gt;Sitemap&lt;/a&gt; makes it easier for search engine to index your site.
&lt;a href=&quot;https://github.com/jekyll/jekyll-sitemap&quot;&gt;Jekyll Sitemap Generator Plugin&lt;/a&gt; creates sitemap. Just follow its installation instructions.&lt;/p&gt;

&lt;p&gt;Don&amp;#39;t forget to register your sitemap with search engines. &lt;a href=&quot;https://support.google.com/sites/answer/100283?hl=en&quot;&gt;How to submit a sitemap to Google&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;Open Graph metadata&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Facebook_Platform#Open_Graph_protocol&quot;&gt;Open Graph protocol&lt;/a&gt; enables integration of web pages into the social graph. This protocol was originally
developed for Facebook but &lt;a href=&quot;http://stackoverflow.com/questions/10397510/do-services-other-than-facebook-use-open-graph&quot;&gt;it is used by variety of services&lt;/a&gt; now.&lt;/p&gt;

&lt;p&gt;It makes a lot of sense to add its meta tags into your web pages.&lt;/p&gt;

&lt;p&gt;An article &lt;a href=&quot;http://danyalzia.com/2015/03/25/integrating-facebook-open-graph-in-jekyll/&quot;&gt;Integrating Facebook Open Graph Meta Tags In Jekyll&lt;/a&gt; gives detailed instructions on integration process.
You can also take a look into &lt;a href=&quot;https://github.com/vitalyrepin/vrepinblog/blob/master/_includes/head.html&quot;&gt;my blog sources&lt;/a&gt; for more examples. Pay special attention to the &lt;em&gt;escape&lt;/em&gt; filter which
is needed to handle quotes properly.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Blog comments = Disqus + Jekyll</title>
   <link href="http://localhost:4000/vr/DisqusAddComments/"/>
   <updated>2015-06-29T00:00:00+03:00</updated>
   <id>http://localhost:4000/DisqusAddComments</id>
   <content type="html">&lt;p&gt;Jekyll and Disqus integration steps are described in &lt;a href=&quot;http://joshualande.com/jekyll-github-pages-poole/&quot;&gt;Joshua Lande&amp;#39;s post&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However it is better to get a little bit deeper and set &lt;a href=&quot;https://help.disqus.com/customer/portal/articles/472098-javascript-configuration-variables&quot;&gt;Disqus configuration variables&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s pretty simple and straightforward.  Quote from my &lt;a href=&quot;https://github.com/vitalyrepin/vrepinblog/blob/master/_layouts/default.html&quot;&gt;layout&lt;/a&gt;:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;disqus_shortname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;vitalyrepinblog&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;gamla_disqus_satte&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;disqus_identifier&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;{{ page.id | escape }}&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;disqus_title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;{{ page.title | escape }}&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;disqus_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;{{site.url}}{{site.baseurl}}{{ page.url }}&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;endunless&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Variable &lt;em&gt;gamla&lt;em&gt;disqus&lt;/em&gt;satte&lt;/em&gt; is needed for the old-style Disqus comments (integrated without setting variables other than &lt;em&gt;disqus_shortname&lt;/em&gt;) not to be lost. It is set in the post&amp;#39;s YAML frontmatter.&lt;/p&gt;

&lt;p&gt;If you liked this post, you can
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/DisqusAddComments/&amp;text=Blog comments = Disqus + Jekyll&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  share it with your followers&lt;/a&gt; 
or 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  follow me on Twitter&lt;/a&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to implement proper blog tagging with Jekyll</title>
   <link href="http://localhost:4000/vr/Tagging/"/>
   <updated>2015-06-24T00:00:00+03:00</updated>
   <id>http://localhost:4000/Tagging</id>
   <content type="html">&lt;h2&gt;Goals&lt;/h2&gt;

&lt;p&gt;I can&amp;#39;t imagine blog without tagging. Unfortunatelly, out-of-the box tagging support in Jekyll is very limited. But Jekyll is very extensible which makes it possible to implement tagging.&lt;/p&gt;

&lt;p&gt;My goals for the tagging in blog:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;To be able to tag any post with any amount of tags which I can invent on-the-fly&lt;/li&gt;
&lt;li&gt;To have a &lt;a href=&quot;/vr/tags/&quot;&gt;list of all tagged posts grouped by tags&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;To print a list of tags under each tagged post. Every tag shall lead to a page with a list of posts with the same tag (see this page as an example). The tags shall be displayed in the brief version of the post (in the blog index page) and under the post page.&lt;/li&gt;
&lt;/ul&gt;

&lt;!--break--&gt;

&lt;h3&gt;Goal 1: tagging of the posts&lt;/h3&gt;

&lt;p&gt;It is really simple. Just add variable &lt;em&gt;tags&lt;/em&gt; to every post (in the &lt;a href=&quot;http://jekyllrb.com/docs/frontmatter/&quot;&gt;YAML frontmatter&lt;/a&gt;) you would like to tag:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-liquid&quot; data-lang=&quot;liquid&quot;&gt;&lt;span&gt;&lt;/span&gt;tags: [tag1,tag2,tagN]&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3&gt;Goal 2: List of all tagged posts&lt;/h3&gt;

&lt;p&gt;This is also pretty simple. The following template will generate list of tags:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-liquid&quot; data-lang=&quot;liquid&quot;&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;h2&amp;gt;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&amp;lt;/h2&amp;gt;

&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;capture&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;tag&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;in&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;site.tags&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endfor&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endcapture&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sortedtags&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;tags&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;|&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;|&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;sort&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;tag&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;in&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;sortedtags&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
  &amp;lt;h3 id=&amp;quot;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;escape&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;&amp;quot;&amp;gt;{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;tag&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;&amp;lt;/h3&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&amp;lt;ul&amp;gt;
  &lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;post&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;in&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;site.tags[tag]&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
    &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;baseurl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&amp;quot;&amp;gt;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endfor&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
  &amp;lt;/ul&amp;gt;
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endfor&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;(Idea is adapted from &lt;a href=&quot;http://stackoverflow.com/a/21002505&quot;&gt;stackoverflow answer&lt;/a&gt;. Thanks, &lt;a href=&quot;http://stackoverflow.com/users/6884/christian-specht&quot;&gt;Christian&lt;/a&gt;!)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/vr/tags/&quot;&gt;Generated page&lt;/a&gt; can now be added to your site.&lt;/p&gt;

&lt;h3&gt; Goal 3: print list of hyperlinked tags under post&lt;/h3&gt;

&lt;p&gt;This is the most complicated part.&lt;/p&gt;

&lt;p&gt;First step is to follow the guide &lt;a href=&quot;http://charliepark.org/tags-in-jekyll/&quot;&gt;Tags in Jekyll&lt;/a&gt;. At the end you will have a page with tagged articles for every tag.
I modified a little &lt;a href=&quot;https://github.com/vitalyrepin/vrepinblog/blob/master/_layouts/tag_index.html&quot;&gt;tag_index.html&lt;/a&gt; from Charlie&amp;#39;s example.&lt;/p&gt;

&lt;p&gt;Now we need to print proper hyperlinks at the end of the post.&lt;/p&gt;

&lt;p&gt;Add file &lt;em&gt;tagsforpost.html&lt;/em&gt; to your &lt;em&gt;_include&lt;/em&gt; folder:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-liquid&quot; data-lang=&quot;liquid&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&amp;lt;!-- Getting and sorting tags alphabetically --&amp;gt;
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endcomment&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;capture&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;mytags&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;tag&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;in&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;include.tags&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endfor&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endcapture&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sortedtags&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;mytags&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;|&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;|&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;sort&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&amp;lt;!-- Tags output: Name + link to the page with list of all the posts with the same tag --&amp;gt;
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endcomment&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;tag&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;in&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;sortedtags&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;
&amp;lt;a href=&amp;quot;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;baseurl&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;/tag/&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&amp;quot;&amp;gt;#&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&amp;lt;/a&amp;gt;
&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;endfor&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;At first stage, tag names are sorted. At the second stage they are printed as hyperlinks.&lt;/p&gt;

&lt;p&gt;This file is used by two other templates.&lt;/p&gt;

&lt;p&gt;First, &lt;a href=&quot;https://github.com/vitalyrepin/vrepinblog/blob/master/_layouts/post.html&quot;&gt;post template&lt;/a&gt;:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-liquid&quot; data-lang=&quot;liquid&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;tagsforpost.html&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;page.tags&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Second, &lt;a href=&quot;https://github.com/vitalyrepin/vrepinblog/blob/master/index.html&quot;&gt;homepage template&lt;/a&gt;:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-liquid&quot; data-lang=&quot;liquid&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;tagsforpost.html&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;post.tags&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;That&amp;#39;s it. Congratulations! We are having working setup with tags.&lt;/p&gt;

&lt;p&gt;If you liked this post, you can
&lt;a href=&quot;https://twitter.com/intent/tweet?url=http://localhost:4000/Tagging/&amp;text=How to implement proper blog tagging with Jekyll&amp;via=vitalyrepin&quot; 
   target=&quot;_blank&quot;&gt;
  share it with your followers&lt;/a&gt; 
or 
&lt;a href=&quot;https://twitter.com/vitalyrepin&quot;&gt;
  follow me on Twitter&lt;/a&gt;!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Jekyll is cool</title>
   <link href="http://localhost:4000/vr/Jekyll-is-cool/"/>
   <updated>2015-06-23T00:00:00+03:00</updated>
   <id>http://localhost:4000/Jekyll is cool</id>
   <content type="html">&lt;div class=&quot;message&quot;&gt;
My first post in a new Jekyll-based blog!
&lt;/div&gt;

&lt;p&gt;I found Jekyll much more powerful than txt2site.&lt;/p&gt;

&lt;p&gt;Several useful links if you want to make your Jekyll-based blog:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://jekyllrb.com/docs/home/&quot;&gt;Jekyll docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://joshualande.com/jekyll-github-pages-poole&quot;&gt;How I Created a Beautiful and Minimal Blog Using Jekyll, Github Pages, and poole&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://txt2tags.wordpress.com/2014/04/09/use-txt2tags-markup-in-jekyll/&quot;&gt;Use txt2tags markup in Jekyll&lt;/a&gt;  Extremely useful if you need to move some of your old content from &lt;a href=&quot;http://home.deds.nl/%7Esvg_experimenten/txt2site/&quot;&gt;txt2site&lt;/a&gt; to Jekyll&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Github repo with the sources of this blog can be found here: &lt;a href=&quot;https://github.com/vitalyrepin/vrepinblog&quot;&gt;https://github.com/vitalyrepin/vrepinblog&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 

</feed>
